(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64501114"],{"0d3b":function(e,t,r){var n=r("d039"),s=r("b622"),i=r("c430"),a=s("iterator");e.exports=!n((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach((function(e,n){t["delete"]("b"),r+=n+e})),i&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},"0fb2":function(e,t,r){"use strict";r("e8f1")},"16b0":function(e,t,r){},"1b62":function(e,t,r){"use strict";r("b2e8")},2532:function(e,t,r){"use strict";var n=r("23e7"),s=r("5a34"),i=r("1d80"),a=r("ab13");n({target:"String",proto:!0,forced:!a("includes")},{includes:function(e){return!!~String(i(this)).indexOf(s(e),arguments.length>1?arguments[1]:void 0)}})},"2b3d":function(e,t,r){"use strict";r("3ca3");var n,s=r("23e7"),i=r("83ab"),a=r("0d3b"),o=r("da84"),c=r("37e8"),u=r("6eeb"),l=r("19aa"),f=r("5135"),h=r("60da"),d=r("4df4"),p=r("6547").codeAt,w=r("5fb2"),v=r("d44e"),m=r("9861"),g=r("69f3"),b=o.URL,A=m.URLSearchParams,k=m.getState,C=g.set,y=g.getterFor("URL"),U=Math.floor,R=Math.pow,x="Invalid authority",L="Invalid scheme",I="Invalid host",_="Invalid port",$=/[A-Za-z]/,O=/[\d+-.A-Za-z]/,T=/\d/,S=/^(0x|0X)/,j=/^[0-7]+$/,E=/^\d+$/,F=/^[\dA-Fa-f]+$/,B=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,P=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,D=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,N=/[\u0009\u000A\u000D]/g,M=function(e,t){var r,n,s;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return I;if(r=q(t.slice(1,-1)),!r)return I;e.host=r}else if(K(e)){if(t=w(t),B.test(t))return I;if(r=Q(t),null===r)return I;e.host=r}else{if(P.test(t))return I;for(r="",n=d(t),s=0;s<n.length;s++)r+=X(n[s],H);e.host=r}},Q=function(e){var t,r,n,s,i,a,o,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),t=c.length,t>4)return e;for(r=[],n=0;n<t;n++){if(s=c[n],""==s)return e;if(i=10,s.length>1&&"0"==s.charAt(0)&&(i=S.test(s)?16:8,s=s.slice(8==i?1:2)),""===s)a=0;else{if(!(10==i?E:8==i?j:F).test(s))return e;a=parseInt(s,i)}r.push(a)}for(n=0;n<t;n++)if(a=r[n],n==t-1){if(a>=R(256,5-t))return null}else if(a>255)return null;for(o=r.pop(),n=0;n<r.length;n++)o+=r[n]*R(256,3-n);return o},q=function(e){var t,r,n,s,i,a,o,c=[0,0,0,0,0,0,0,0],u=0,l=null,f=0,h=function(){return e.charAt(f)};if(":"==h()){if(":"!=e.charAt(1))return;f+=2,u++,l=u}while(h()){if(8==u)return;if(":"!=h()){t=r=0;while(r<4&&F.test(h()))t=16*t+parseInt(h(),16),f++,r++;if("."==h()){if(0==r)return;if(f-=r,u>6)return;n=0;while(h()){if(s=null,n>0){if(!("."==h()&&n<4))return;f++}if(!T.test(h()))return;while(T.test(h())){if(i=parseInt(h(),10),null===s)s=i;else{if(0==s)return;s=10*s+i}if(s>255)return;f++}c[u]=256*c[u]+s,n++,2!=n&&4!=n||u++}if(4!=n)return;break}if(":"==h()){if(f++,!h())return}else if(h())return;c[u++]=t}else{if(null!==l)return;f++,u++,l=u}}if(null!==l){a=u-l,u=7;while(0!=u&&a>0)o=c[u],c[u--]=c[l+a-1],c[l+--a]=o}else if(8!=u)return;return c},W=function(e){for(var t=null,r=1,n=null,s=0,i=0;i<8;i++)0!==e[i]?(s>r&&(t=n,r=s),n=null,s=0):(null===n&&(n=i),++s);return s>r&&(t=n,r=s),t},G=function(e){var t,r,n,s;if("number"==typeof e){for(t=[],r=0;r<4;r++)t.unshift(e%256),e=U(e/256);return t.join(".")}if("object"==typeof e){for(t="",n=W(e),r=0;r<8;r++)s&&0===e[r]||(s&&(s=!1),n===r?(t+=r?":":"::",s=!0):(t+=e[r].toString(16),r<7&&(t+=":")));return"["+t+"]"}return e},H={},J=h({},H,{" ":1,'"':1,"<":1,">":1,"`":1}),Y=h({},J,{"#":1,"?":1,"{":1,"}":1}),z=h({},Y,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),X=function(e,t){var r=p(e,0);return r>32&&r<127&&!f(t,e)?e:encodeURIComponent(e)},V={ftp:21,file:null,http:80,https:443,ws:80,wss:443},K=function(e){return f(V,e.scheme)},Z=function(e){return""!=e.username||""!=e.password},ee=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},te=function(e,t){var r;return 2==e.length&&$.test(e.charAt(0))&&(":"==(r=e.charAt(1))||!t&&"|"==r)},re=function(e){var t;return e.length>1&&te(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},ne=function(e){var t=e.path,r=t.length;!r||"file"==e.scheme&&1==r&&te(t[0],!0)||t.pop()},se=function(e){return"."===e||"%2e"===e.toLowerCase()},ie=function(e){return e=e.toLowerCase(),".."===e||"%2e."===e||".%2e"===e||"%2e%2e"===e},ae={},oe={},ce={},ue={},le={},fe={},he={},de={},pe={},we={},ve={},me={},ge={},be={},Ae={},ke={},Ce={},ye={},Ue={},Re={},xe={},Le=function(e,t,r,s){var i,a,o,c,u=r||ae,l=0,h="",p=!1,w=!1,v=!1;r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(D,"")),t=t.replace(N,""),i=d(t);while(l<=i.length){switch(a=i[l],u){case ae:if(!a||!$.test(a)){if(r)return L;u=ce;continue}h+=a.toLowerCase(),u=oe;break;case oe:if(a&&(O.test(a)||"+"==a||"-"==a||"."==a))h+=a.toLowerCase();else{if(":"!=a){if(r)return L;h="",u=ce,l=0;continue}if(r&&(K(e)!=f(V,h)||"file"==h&&(Z(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=h,r)return void(K(e)&&V[e.scheme]==e.port&&(e.port=null));h="","file"==e.scheme?u=be:K(e)&&s&&s.scheme==e.scheme?u=ue:K(e)?u=de:"/"==i[l+1]?(u=le,l++):(e.cannotBeABaseURL=!0,e.path.push(""),u=Ue)}break;case ce:if(!s||s.cannotBeABaseURL&&"#"!=a)return L;if(s.cannotBeABaseURL&&"#"==a){e.scheme=s.scheme,e.path=s.path.slice(),e.query=s.query,e.fragment="",e.cannotBeABaseURL=!0,u=xe;break}u="file"==s.scheme?be:fe;continue;case ue:if("/"!=a||"/"!=i[l+1]){u=fe;continue}u=pe,l++;break;case le:if("/"==a){u=we;break}u=ye;continue;case fe:if(e.scheme=s.scheme,a==n)e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,e.path=s.path.slice(),e.query=s.query;else if("/"==a||"\\"==a&&K(e))u=he;else if("?"==a)e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,e.path=s.path.slice(),e.query="",u=Re;else{if("#"!=a){e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,e.path=s.path.slice(),e.path.pop(),u=ye;continue}e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,e.path=s.path.slice(),e.query=s.query,e.fragment="",u=xe}break;case he:if(!K(e)||"/"!=a&&"\\"!=a){if("/"!=a){e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,u=ye;continue}u=we}else u=pe;break;case de:if(u=pe,"/"!=a||"/"!=h.charAt(l+1))continue;l++;break;case pe:if("/"!=a&&"\\"!=a){u=we;continue}break;case we:if("@"==a){p&&(h="%40"+h),p=!0,o=d(h);for(var m=0;m<o.length;m++){var g=o[m];if(":"!=g||v){var b=X(g,z);v?e.password+=b:e.username+=b}else v=!0}h=""}else if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&K(e)){if(p&&""==h)return x;l-=d(h).length+1,h="",u=ve}else h+=a;break;case ve:case me:if(r&&"file"==e.scheme){u=ke;continue}if(":"!=a||w){if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&K(e)){if(K(e)&&""==h)return I;if(r&&""==h&&(Z(e)||null!==e.port))return;if(c=M(e,h),c)return c;if(h="",u=Ce,r)return;continue}"["==a?w=!0:"]"==a&&(w=!1),h+=a}else{if(""==h)return I;if(c=M(e,h),c)return c;if(h="",u=ge,r==me)return}break;case ge:if(!T.test(a)){if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&K(e)||r){if(""!=h){var A=parseInt(h,10);if(A>65535)return _;e.port=K(e)&&A===V[e.scheme]?null:A,h=""}if(r)return;u=Ce;continue}return _}h+=a;break;case be:if(e.scheme="file","/"==a||"\\"==a)u=Ae;else{if(!s||"file"!=s.scheme){u=ye;continue}if(a==n)e.host=s.host,e.path=s.path.slice(),e.query=s.query;else if("?"==a)e.host=s.host,e.path=s.path.slice(),e.query="",u=Re;else{if("#"!=a){re(i.slice(l).join(""))||(e.host=s.host,e.path=s.path.slice(),ne(e)),u=ye;continue}e.host=s.host,e.path=s.path.slice(),e.query=s.query,e.fragment="",u=xe}}break;case Ae:if("/"==a||"\\"==a){u=ke;break}s&&"file"==s.scheme&&!re(i.slice(l).join(""))&&(te(s.path[0],!0)?e.path.push(s.path[0]):e.host=s.host),u=ye;continue;case ke:if(a==n||"/"==a||"\\"==a||"?"==a||"#"==a){if(!r&&te(h))u=ye;else if(""==h){if(e.host="",r)return;u=Ce}else{if(c=M(e,h),c)return c;if("localhost"==e.host&&(e.host=""),r)return;h="",u=Ce}continue}h+=a;break;case Ce:if(K(e)){if(u=ye,"/"!=a&&"\\"!=a)continue}else if(r||"?"!=a)if(r||"#"!=a){if(a!=n&&(u=ye,"/"!=a))continue}else e.fragment="",u=xe;else e.query="",u=Re;break;case ye:if(a==n||"/"==a||"\\"==a&&K(e)||!r&&("?"==a||"#"==a)){if(ie(h)?(ne(e),"/"==a||"\\"==a&&K(e)||e.path.push("")):se(h)?"/"==a||"\\"==a&&K(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&te(h)&&(e.host&&(e.host=""),h=h.charAt(0)+":"),e.path.push(h)),h="","file"==e.scheme&&(a==n||"?"==a||"#"==a))while(e.path.length>1&&""===e.path[0])e.path.shift();"?"==a?(e.query="",u=Re):"#"==a&&(e.fragment="",u=xe)}else h+=X(a,Y);break;case Ue:"?"==a?(e.query="",u=Re):"#"==a?(e.fragment="",u=xe):a!=n&&(e.path[0]+=X(a,H));break;case Re:r||"#"!=a?a!=n&&("'"==a&&K(e)?e.query+="%27":e.query+="#"==a?"%23":X(a,H)):(e.fragment="",u=xe);break;case xe:a!=n&&(e.fragment+=X(a,J));break}l++}},Ie=function(e){var t,r,n=l(this,Ie,"URL"),s=arguments.length>1?arguments[1]:void 0,a=String(e),o=C(n,{type:"URL"});if(void 0!==s)if(s instanceof Ie)t=y(s);else if(r=Le(t={},String(s)),r)throw TypeError(r);if(r=Le(o,a,null,t),r)throw TypeError(r);var c=o.searchParams=new A,u=k(c);u.updateSearchParams(o.query),u.updateURL=function(){o.query=String(c)||null},i||(n.href=$e.call(n),n.origin=Oe.call(n),n.protocol=Te.call(n),n.username=Se.call(n),n.password=je.call(n),n.host=Ee.call(n),n.hostname=Fe.call(n),n.port=Be.call(n),n.pathname=Pe.call(n),n.search=De.call(n),n.searchParams=Ne.call(n),n.hash=Me.call(n))},_e=Ie.prototype,$e=function(){var e=y(this),t=e.scheme,r=e.username,n=e.password,s=e.host,i=e.port,a=e.path,o=e.query,c=e.fragment,u=t+":";return null!==s?(u+="//",Z(e)&&(u+=r+(n?":"+n:"")+"@"),u+=G(s),null!==i&&(u+=":"+i)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==o&&(u+="?"+o),null!==c&&(u+="#"+c),u},Oe=function(){var e=y(this),t=e.scheme,r=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(n){return"null"}return"file"!=t&&K(e)?t+"://"+G(e.host)+(null!==r?":"+r:""):"null"},Te=function(){return y(this).scheme+":"},Se=function(){return y(this).username},je=function(){return y(this).password},Ee=function(){var e=y(this),t=e.host,r=e.port;return null===t?"":null===r?G(t):G(t)+":"+r},Fe=function(){var e=y(this).host;return null===e?"":G(e)},Be=function(){var e=y(this).port;return null===e?"":String(e)},Pe=function(){var e=y(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},De=function(){var e=y(this).query;return e?"?"+e:""},Ne=function(){return y(this).searchParams},Me=function(){var e=y(this).fragment;return e?"#"+e:""},Qe=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(i&&c(_e,{href:Qe($e,(function(e){var t=y(this),r=String(e),n=Le(t,r);if(n)throw TypeError(n);k(t.searchParams).updateSearchParams(t.query)})),origin:Qe(Oe),protocol:Qe(Te,(function(e){var t=y(this);Le(t,String(e)+":",ae)})),username:Qe(Se,(function(e){var t=y(this),r=d(String(e));if(!ee(t)){t.username="";for(var n=0;n<r.length;n++)t.username+=X(r[n],z)}})),password:Qe(je,(function(e){var t=y(this),r=d(String(e));if(!ee(t)){t.password="";for(var n=0;n<r.length;n++)t.password+=X(r[n],z)}})),host:Qe(Ee,(function(e){var t=y(this);t.cannotBeABaseURL||Le(t,String(e),ve)})),hostname:Qe(Fe,(function(e){var t=y(this);t.cannotBeABaseURL||Le(t,String(e),me)})),port:Qe(Be,(function(e){var t=y(this);ee(t)||(e=String(e),""==e?t.port=null:Le(t,e,ge))})),pathname:Qe(Pe,(function(e){var t=y(this);t.cannotBeABaseURL||(t.path=[],Le(t,e+"",Ce))})),search:Qe(De,(function(e){var t=y(this);e=String(e),""==e?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Le(t,e,Re)),k(t.searchParams).updateSearchParams(t.query)})),searchParams:Qe(Ne),hash:Qe(Me,(function(e){var t=y(this);e=String(e),""!=e?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Le(t,e,xe)):t.fragment=null}))}),u(_e,"toJSON",(function(){return $e.call(this)}),{enumerable:!0}),u(_e,"toString",(function(){return $e.call(this)}),{enumerable:!0}),b){var qe=b.createObjectURL,We=b.revokeObjectURL;qe&&u(Ie,"createObjectURL",(function(e){return qe.apply(b,arguments)})),We&&u(Ie,"revokeObjectURL",(function(e){return We.apply(b,arguments)}))}v(Ie,"URL"),s({global:!0,forced:!a,sham:!i},{URL:Ie})},"2d27":function(e,t,r){"use strict";r("60b8")},"432f":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEcSURBVHgBrVXRkYIwEN0w9390cCmBDo4S7ODs4OxAOyF2YAemBDsQK1ArWPcZ1Ihhgw5v5g078HjsLtnE0ACYuZTLTFgJv7vbZ6EHjTEnGgMYCZfCI+tohDZnVgn3PB77QdPOLJdVCnin6ptZ1jNrhI71TMvYUBM3I3UraAoOPfhTWnuI4lbR/SPLQoKapsF1mX1RWGd9OHpk5qP7cWzptbJf9GU71LMcEj3doOQzTYcSJfdHaC5fwvVesoyZ7zKq6dFzS68l7yBasI7VTY04o52jZEfTwRfdrrFWRD9RbBWdE6/2GnEYPW2OG86P3vPH0HD+HLNkznjA721fx0GzyBTluxFmnhN7odGMKRwBNYU5BVrCWgs/IHkEXADD1aPMTvrqLgAAAABJRU5ErkJggg=="},"44e7":function(e,t,r){var n=r("861d"),s=r("c6b6"),i=r("b622"),a=i("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==s(e))}},"46ed":function(e,t,r){"use strict";r("ca8f")},"4a39":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-profile"},[r("Navbar"),r("Profile"),r("RecommendUsers")],1)},s=[],i=r("d178"),a=r("88fd"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"profile"},[r("div",{staticClass:"header"},[r("div",{staticClass:"arrow"},[r("div",{staticClass:"icon back",on:{click:function(t){return e.$router.go(-1)}}})]),r("div",{staticClass:"simple-info"},[r("div",{staticClass:"name"},[e._v(e._s(e.user.user?e.user.user.name:e.user.name))]),r("div",{staticClass:"tweet-count"},[e._v(e._s(e.user.tweets?e.user.tweets.length:0)+" 推文")])])]),r("div",{staticClass:"user-info"},[r("div",{staticClass:"cover-photo",style:{background:"url("+(e.user.user?e.user.user.cover:"")+") no-repeat center/cover"}}),r("div",{staticClass:"avatar",style:{background:"url("+(e.user.user?e.user.user.avatar:"")+") no-repeat center/cover"}}),"/user/self"===this.$route.path||this.$route.path==="/user/other/"+e.currentUser.id?r("button",{staticClass:"btn-edit",on:{click:e.afterClickEditProfile}},[e._v("編輯個人資料")]):e._e(),"/user/self"!==this.$route.path&&this.$route.path!=="/user/other/"+e.currentUser.id?r("div",{staticClass:"other-button-wrapper"},[r("div",{staticClass:"btn-messege"},[e.user.user?r("a",{on:{click:function(t){e.$router.push("/private?id="+e.user.user.id).catch((function(){}))}}},[r("div",{staticClass:"icon messege"})]):e._e()]),e.user.user?r("div",[e.user.isSubscribed?e._e():r("div",{staticClass:"btn-noti",on:{click:function(t){return e.addSubscribe(e.user.user.id)}}},[r("div",{staticClass:"icon subscribe"})]),e.user.isSubscribed?r("div",{staticClass:"btn-noti already",on:{click:function(t){return e.deleteSubscribe(e.user.user.id)}}},[r("div",{staticClass:"icon subscribe"})]):e._e()]):e._e(),e.user.isFollowed?r("button",{staticClass:"btn-follow unfollow",on:{click:function(t){return e.deleteFollowing(e.user.user.id)}}},[e._v("正在跟隨")]):e._e(),e.user.isFollowed?e._e():r("button",{staticClass:"btn btn-follow",on:{click:function(t){return e.addFollowing(e.user.user.id)}}},[e._v("跟隨")])]):e._e(),r("div",{staticClass:"name"},[e._v(e._s(e.user.user?e.user.user.name:e.user.name))]),r("div",{staticClass:"account"},[e._v(e._s(e.user.user?e.user.user.account:""))]),r("div",{staticClass:"intro"},[e._v(e._s(e.user.user?e.user.user.introduction:""))]),r("div",{staticClass:"number-followers"},["/user/self"===this.$route.path||this.$route.path==="/user/other/"+e.currentUser.id?r("div",[r("span",{staticClass:"followings",on:{click:function(t){return e.$router.push("/user/self/following")}}},[e._v(e._s(e.user.following?e.user.following.count:0)+" 個")]),r("span",{staticClass:"type followings",on:{click:function(t){return e.$router.push("/user/self/following")}}},[e._v("跟隨中")]),r("span",{staticClass:"followers",on:{click:function(t){return e.$router.push("/user/self/follower")}}},[e._v(e._s(e.user.follower?e.user.follower.count:0)+" 個")]),r("span",{staticClass:"type followers",on:{click:function(t){return e.$router.push("/user/self/follower")}}},[e._v("跟隨者")])]):e._e(),"/user/self"!==this.$route.path&&this.$route.path!=="/user/other/"+e.currentUser.id?r("div",{staticClass:"hey"},[r("span",{staticClass:"followings",on:{click:function(t){return e.$router.push("/user/other/"+e.user.user.id+"/following")}}},[e._v(e._s(e.user.following?e.user.following.count:0)+" 個")]),r("span",{staticClass:"type followings",on:{click:function(t){return e.$router.push("/user/other/"+e.user.user.id+"/following")}}},[e._v("跟隨中")]),r("span",{staticClass:"followers",on:{click:function(t){return e.$router.push("/user/other/"+e.user.user.id+"/follower")}}},[e._v(e._s(e.user.follower?e.user.follower.count:0)+" 個")]),r("span",{staticClass:"type followers",on:{click:function(t){return e.$router.push("/user/other/"+e.user.user.id+"/follower")}}},[e._v("跟隨者")])]):e._e()])]),r("div",{staticClass:"tab"},[r("div",{staticClass:"item",class:{active:"推文"===e.tabOption},on:{click:e.selectTab}},[r("span",{staticClass:"text"},[e._v("推文")])]),r("div",{staticClass:"item",class:{active:"推文與回覆"===e.tabOption},on:{click:e.selectTab}},[r("span",{staticClass:"text"},[e._v("推文與回覆")])]),r("div",{staticClass:"item",class:{active:"喜歡的內容"===e.tabOption},on:{click:e.selectTab}},[r("span",{staticClass:"text"},[e._v("喜歡的內容")])])]),"推文"===e.tabOption?r("TweetList",{attrs:{tweets:e.user.tweets,isReply:!1}}):e._e(),"推文與回覆"===e.tabOption?r("TweetList",{attrs:{tweets:e.userReplies,isReply:!0}}):e._e(),"喜歡的內容"===e.tabOption?r("TweetList",{attrs:{tweets:e.userLikes,isReply:!1}}):e._e(),e.showEditProfileModal?r("ModalForEditProfile",{on:{"after-click-cross":e.afterClickCross,completeEdit:e.completeEdit}}):e._e()],1)},c=[],u=(r("a4d3"),r("e01a"),r("4de4"),r("caad"),r("d81d"),r("b0c0"),r("2532"),r("96cf"),r("1da1")),l=r("5530"),f=r("a7a7"),h=r("8845"),d=r("4c78"),p=r("4cce"),w=r("2fa3"),v=r("2f62"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal edit"},[n("div",{staticClass:"modal-content"},[n("form",{ref:"form",attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[n("div",{staticClass:"modal-header"},[n("div",{staticClass:"icon cross",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.cancelModalClick()}}}),n("span",{staticClass:"title"},[e._v("編輯個人資料")]),n("button",{staticClass:"save",attrs:{type:"submit"}},[e._v("儲存")])]),n("div",{staticClass:"modal-body"},[n("div",{staticClass:"background-photo",style:{background:"url("+e.user.cover+") no-repeat center/cover"}}),n("div",{staticClass:"photo",style:{background:"url("+e.user.avatar+") no-repeat center/cover"}}),n("div",{staticClass:"for-inputs"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],staticClass:"tweet-content name",attrs:{type:"text",placeholder:"",name:"name"},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}}),n("span",{staticClass:"word-count"},[e._v(e._s(e.user.name?e.user.name.length:0)+"/50")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.user.introduction,expression:"user.introduction"}],staticClass:"tweet-content intro",attrs:{type:"textarea",placeholder:"",name:"introduction"},domProps:{value:e.user.introduction},on:{input:function(t){t.target.composing||e.$set(e.user,"introduction",t.target.value)}}}),n("span",{staticClass:"word-count"},[e._v(e._s(e.user.introduction?e.user.introduction.length:0)+"/160")])]),n("div",{staticClass:"icon camera-two"},[n("input",{ref:"coverFile",staticClass:"coverFile",attrs:{name:"cover",accept:"image/*",type:"file"},on:{change:e.coverChange}})]),n("div",{staticClass:"icon camera-one"},[n("input",{ref:"avatarFile",staticClass:"avatarFile",attrs:{name:"avatar",accept:"image/*",type:"file"},on:{change:e.avatarChange}})]),n("img",{staticClass:"icon camera-two",attrs:{src:r("4f07"),alt:""}}),n("img",{staticClass:"icon inside-one",attrs:{src:r("432f"),alt:""}}),n("img",{staticClass:"icon inside-two",attrs:{src:r("432f"),alt:""}}),n("img",{staticClass:"icon cross",attrs:{src:r("eab0"),alt:""}}),n("span",{staticClass:"name tag"},[e._v("名稱")]),n("span",{staticClass:"self-intro tag"},[e._v("自我介紹")])])])])])},g=[],b=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),{name:"Modal",computed:Object(l["a"])({},Object(v["b"])(["currentUser","isAuthenticated"])),created:function(){this.user=this.currentUser},methods:{cancelModalClick:function(){this.$emit("after-click-cross")},coverChange:function(){var e=this.$refs.coverFile.files.files;if(0!==e){var t=window.URL.createObjectURL(this.$refs.coverFile.files[0]);this.user.cover=t}},avatarChange:function(){var e=this.$refs.avatarFile.files.files;if(0!==e){var t=window.URL.createObjectURL(this.$refs.avatarFile.files[0]);this.user.avatar=t}},handleSubmit:function(e){if(""!==this.user.name)if(this.user.name.length>50&&this.user.introduction.length>160)w["a"].fire({icon:"warning",title:"名稱和自我介紹超過最大限制字數！"});else if(this.user.name.length>50)w["a"].fire({icon:"warning",title:"名稱只限50字"});else if(this.user.introduction.length>160)w["a"].fire({icon:"warning",title:"自我介紹只限160字"});else{var t=e.target,r=new FormData(t);this.putUser(r)}else w["a"].fire({icon:"warning",title:"請輸入名稱"})},putUser:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.$loading.show({isFullPage:!0,opacity:1},{default:t.$createElement("MyLoading")}),r.prev=1,r.next=4,p["a"].putUser({userId:t.currentUser.id,formData:e});case 4:if(s=r.sent,i=s.data,"success"===i.status){r.next=8;break}throw new Error(i.message);case 8:return t.$emit("completeEdit",t.user),r.next=11,t.$store.dispatch("fetchCurrentUser");case 11:t.$emit("after-click-cross"),n.hide(),r.next=19;break;case 15:r.prev=15,r.t0=r["catch"](1),n.hide(),w["a"].fire({icon:"error",title:"無法更新資料，請稍後再試"});case 19:case"end":return r.stop()}}),r,null,[[1,15]])})))()}}}),A=b,k=(r("1b62"),r("2877")),C=Object(k["a"])(A,m,g,!1,null,null,null),y=C.exports,U={name:"Profile",components:{TweetList:d["a"],ModalForEditProfile:y},data:function(){return{user:{tweets:[]},tabOption:"推文",showEditProfileModal:!1,userLikes:[],userReplies:[]}},created:function(){var e=this;this.$bus.$on("tweetAction",(function(t){e.tweetAction(t)})),this.$bus.$on("followAction",(function(t){e.followAction(t)})),this.$bus.$on("renewTweets",(function(t){"/user/self"===e.$route.path&&e.fetchProfile(t)})),this.fetchProfile(),this.fetchUserLikes()},beforeDestroy:function(){this.$bus.$off("tweetAction"),this.$bus.$off("renewTweets")},watch:{"$route.params.id":function(){this.fetchProfile(),this.tabOption="推文"}},computed:Object(l["a"])({},Object(v["b"])(["currentUser","isAuthenticated"])),methods:{selectTab:function(e){switch(this.tabOption=e.target.children[0]?e.target.children[0].innerText:e.target.innerText,this.tabOption){case"推文":break;case"推文與回覆":break;case"喜歡的內容":this.fetchUserLikes();break}},fetchProfile:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,s,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$loading.show({isFullPage:!0,opacity:1},{default:e.$createElement("MyLoading")}),n="/user/self"===e.$route.path?e.currentUser.id:e.$route.params.id,t.prev=2,t.next=5,p["a"].getProfile({userId:n});case 5:s=t.sent,i=s.data,e.user=i,e.user.following.rows.map((function(e){return e.followingId})).includes(n)&&(e.user.following.rows=e.user.following.rows.filter((function(e){return e.followingId!==n})),e.user.following.count=e.user.following.count-1),e.user.follower.rows.map((function(e){return e.followerId})).includes(n)&&(e.user.follower.rows=e.user.follower.rows.filter((function(e){return e.followerId!==n})),e.user.follower.count=e.user.follower.count-1),e.user.tweets=e.user.tweets.map((function(e){return{id:e.id,userId:e.User.id,name:e.User.name,avatar:e.User.avatar,account:e.User.account,createdAt:e.createdAt,description:e.description,likeTweetCount:e.likeTweetCount,replyTweetCount:e.replyTweetCount,isLiked:e.isLiked}})),e.user.tweets.sort((function(e,t){return e.createdAt<t.createdAt?1:-1})),a=e,e.userReplies=i.replies.map((function(e){return Object(l["a"])(Object(l["a"])({},e),{},{replyTo:e.Tweet?e.Tweet.User.account:"",name:a.user.user.name,avatar:a.user.user.avatar,account:a.user.user.account,description:e.comment,type:"reply"})})),e.userReplies.sort((function(e,t){return e.createdAt<t.createdAt?1:-1})),r.hide(),t.next=23;break;case 18:t.prev=18,t.t0=t["catch"](2),r.hide(),console.log(t.t0),w["a"].fire({icon:"error",title:"目前無法取得資料，請稍候"});case 23:case"end":return t.stop()}}),t,null,[[2,18]])})))()},fetchUserLikes:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="/user/self"===e.$route.path?e.currentUser.id:e.$route.params.id,t.prev=1,t.next=4,p["a"].getUserLikes({userId:r});case 4:n=t.sent,s=n.data,e.userLikes=s.map((function(e){return{id:e.Tweet.id,userId:e.Tweet.User.id,name:e.Tweet.User.name,avatar:e.Tweet.User.avatar,account:e.Tweet.User.account,createdAt:e.Tweet.createdAt,description:e.Tweet.description,likeTweetCount:e.likeTweetCount,replyTweetCount:e.replyTweetCount,isLiked:e.isLiked,likedAt:e.createdAt}})),e.userLikes.sort((function(e,t){return e.likedAt<t.likedAt?1:-1})),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0),w["a"].fire({icon:"error",title:"目前無法取得資料，請稍候"});case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},addFollowing:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h["a"].addFollowing({userId:e});case 3:if(n=r.sent,s=n.data,"success"===s.status){r.next=7;break}throw new Error(s.message);case 7:t.user.isFollowed=!0,s.followship.followerId>0&&s.followship.followingId!==t.currentUser.id&&t.$socket.emit("personal notification",{senderId:t.currentUser.id,titleData:"".concat(t.currentUser.name," 開始追蹤你"),url:"/user/self/follower",type:"follow",recipientId:s.followship.followingId}),t.$bus.$emit("followAction",{type:"follow",userId:e,followship:s.followship}),r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](0),w["a"].fire({icon:"error",title:"無法加入追蹤，請稍後再試"});case 15:case"end":return r.stop()}}),r,null,[[0,12]])})))()},deleteFollowing:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h["a"].deleteFollowing({userId:e});case 3:if(n=r.sent,s=n.data,"success"===s.status){r.next=7;break}throw new Error(s.message);case 7:t.user.isFollowed=!1,t.$bus.$emit("followAction",{type:"unfollow",userId:e}),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),w["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))()},addSubscribe:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f["a"].addSubscribe({userId:e});case 3:if(n=r.sent,s=n.data,"success"===s.status){r.next=7;break}throw new Error(s.message);case 7:t.user.isSubscribed=!0,r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0),w["a"].fire({icon:"error",title:"無法加入追蹤，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()},deleteSubscribe:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f["a"].deleteSubscribe({userId:e});case 3:if(n=r.sent,s=n.data,"success"===s.status){r.next=7;break}throw new Error(s.message);case 7:t.user.isSubscribed=!1,r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),w["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試"});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},tweetAction:function(e){var t="/user/self"===this.$route.path?this.currentUser.id:this.$route.params.id;this.user.tweets=this.user.tweets.map((function(t){return t.id!==e.tweetId?t:Object(l["a"])(Object(l["a"])({},t),{},{likeTweetCount:"like"===e.type?t.likeTweetCount+1:t.likeTweetCount-1,isLiked:!t.isLiked})})),t===this.currentUser.id&&"unlike"===e.type?this.userLikes=this.userLikes.filter((function(t){return t.id!==e.tweetId})):(this.userLikes=this.userLikes.map((function(t){return t.id!==e.tweetId?t:Object(l["a"])(Object(l["a"])({},t),{},{likeTweetCount:"like"===e.type?t.likeTweetCount+1:t.likeTweetCount-1,isLiked:!t.isLiked})})),this.userLikes.sort((function(e,t){return e.likedAt<t.likedAt?1:-1})))},followAction:function(e){"/user/self"===this.$route.path||this.$route.path==="/user/other/".concat(this.currentUser.id)?this.user.following.count="follow"===e.type?this.user.following.count+1:this.user.following.count-1:this.user.user.id===e.userId&&(this.user.isFollowed="follow"===e.type,this.user.follower.count="follow"===e.type?this.user.follower.count+1:this.user.follower.count-1)},afterClickEditProfile:function(){this.showEditProfileModal=!0},afterClickCross:function(){this.showEditProfileModal=!1},completeEdit:function(e){this.user.user=Object.assign({},e),this.user.tweets=this.user.tweets.map((function(t){return Object(l["a"])(Object(l["a"])({},t),{},{name:e.name,avatar:e.avatar,description:e.description})}))}}},R=U,x=(r("b3d7"),Object(k["a"])(R,o,c,!1,null,null,null)),L=x.exports,I={name:"UserProfile",components:{Navbar:i["a"],RecommendUsers:a["a"],Profile:L}},_=I,$=(r("0fb2"),Object(k["a"])(_,n,s,!1,null,null,null));t["default"]=$.exports},"4c78":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.tweets?r("div",{staticClass:"tweet-list"},e._l(e.tweets,(function(t){return r("div",{key:t.id+"-"+Math.random(),staticClass:"list-item",on:{click:function(r){return e.tweetDetail(t)}}},[r("div",{staticClass:"avatar",style:{background:"url("+t.avatar+") no-repeat center/cover"},on:{click:function(r){r.stopPropagation(),e.$router.push("/user/other/"+t.userId).catch((function(){}))}}}),r("div",{staticClass:"tweet-wrapper"},[r("div",{staticClass:"info"},[r("div",{staticClass:"name",on:{click:function(r){e.$router.push("/user/other/"+t.userId).catch((function(){}))}}},[e._v(e._s(t.name))]),r("div",{staticClass:"account-and-post-time"},[r("span",{staticClass:"account",on:{click:function(r){e.$router.push("/user/other/"+t.userId).catch((function(){}))}}},[e._v(e._s(t.account)+" ")]),e._v("• "),r("span",[e._v(e._s(e._f("fromNow")(t.createdAt)))])])]),r("div",{directives:[{name:"show",rawName:"v-show",value:"reply"===t.type,expression:"tweet.type === 'reply'"}],staticClass:"reply-to-wrapper"},[r("span",{staticClass:"title"},[e._v("回覆 ")]),r("span",{staticClass:"name"},[e._v(e._s(t.replyTo))])]),r("div",{staticClass:"content"},[e._v(e._s(t.description))]),r("div",{directives:[{name:"show",rawName:"v-show",value:"reply"!==t.type,expression:"tweet.type !== 'reply'"}],staticClass:"action"},[r("div",{staticClass:"reply-wrapper"},[r("div",{staticClass:"icon reply"}),r("span",{staticClass:"number"},[e._v(e._s(t.replyTweetCount))])]),r("div",{staticClass:"like-wrapper"},[r("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLiked,expression:"!tweet.isLiked"}],staticClass:"icon like",on:{click:function(r){return r.stopPropagation(),e.likeTweet(t.id)}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isLiked,expression:"tweet.isLiked"}],staticClass:"icon like liked",on:{click:function(r){return r.stopPropagation(),e.unlikeTweet(t.id)}}}),r("span",{staticClass:"number"},[e._v(e._s(t.likeTweetCount))])])])])])})),0):e._e()},s=[],i=(r("b0c0"),r("96cf"),r("1da1")),a=r("5530"),o=r("c058"),c=r("2fa3"),u=r("2f62"),l={name:"TweetList",props:{tweets:{type:Array,default:function(){return[]}},isReply:Boolean},computed:Object(a["a"])({},Object(u["b"])(["currentUser","isAuthenticated"])),methods:{tweetDetail:function(e){this.isReply?this.$router.push("/reply_list/".concat(e.TweetId)):this.$router.push("/reply_list/".concat(e.id))},likeTweet:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o["a"].likeTweet({tweetId:e});case 3:if(n=r.sent,s=n.data,"success"===s.status){r.next=7;break}throw new Error(s.message);case 7:t.$bus.$emit("tweetAction",{type:"like",tweetId:e,tweetUserId:s.tweet.UserId}),s.tweet.UserId>0&&s.tweet.UserId!==t.currentUser.id&&t.$socket.emit("personal notification",{senderId:t.currentUser.id,titleData:"".concat(t.currentUser.name," 喜歡你的貼文"),url:"/reply_list/".concat(e),type:"like",recipientId:s.tweet.UserId}),r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](0),console.log(r.t0),c["a"].fire({icon:"error",title:"無法按讚推文，請稍後再試"});case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()},unlikeTweet:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o["a"].unlikeTweet({tweetId:e});case 3:if(n=r.sent,s=n.data,"success"===s.status){r.next=7;break}throw new Error(s.message);case 7:t.$bus.$emit("tweetAction",{type:"unlike",tweetId:e}),r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0),c["a"].fire({icon:"error",title:"無法取消按讚，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()}}},f=l,h=(r("2d27"),r("2877")),d=Object(h["a"])(f,n,s,!1,null,null,null);t["a"]=d.exports},"4f07":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFUSURBVHgB7ZmBbcIwEEXPTJARGIFO0HaDblBGyAYtE5BOQDZghHQD0gnSTlA2uP5TXLCCLQUukCDdkz6JTWx/ny6RcnGkgJmfcHiE5Dj3EvZQDX1BpXOuplsixqCK+7ODlnRtsEgGbfhyNjIHXQNMPIeazoK/UAG9yP/BtQvfV0ZMNuG1Q5nLIuaKPtHwGysjJoeLZGSBJZ0JxuSdObbnTiCJv/W76yokpwuRjUUiGUpupuokAOhYcz8KUsJtavRhndpVioYHSG6O53OK3OFnh3ELP/4DikVJEvobD9w9DQC3N0iWWEdS6NW3Pym0SxPAR/iAC40hQo4mQOhpRhPHDGoxg1rMoBYzqMUMajGDWsygFjOoxQxqMYNazKCWuzD489/A+/IbjUzHQy2VhXecjG4swcr5Qk5FxwLSVKhRiXmYScVKTtCxovazwdhIyomXZ2n8ASC7aL5kWkclAAAAAElFTkSuQmCC"},"5a34":function(e,t,r){var n=r("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},"5fb2":function(e,t,r){"use strict";var n=2147483647,s=36,i=1,a=26,o=38,c=700,u=72,l=128,f="-",h=/[^\0-\u007E]/,d=/[.\u3002\uFF0E\uFF61]/g,p="Overflow: input needs wider integers to process",w=s-i,v=Math.floor,m=String.fromCharCode,g=function(e){var t=[],r=0,n=e.length;while(r<n){var s=e.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var i=e.charCodeAt(r++);56320==(64512&i)?t.push(((1023&s)<<10)+(1023&i)+65536):(t.push(s),r--)}else t.push(s)}return t},b=function(e){return e+22+75*(e<26)},A=function(e,t,r){var n=0;for(e=r?v(e/c):e>>1,e+=v(e/t);e>w*a>>1;n+=s)e=v(e/w);return v(n+(w+1)*e/(e+o))},k=function(e){var t=[];e=g(e);var r,o,c=e.length,h=l,d=0,w=u;for(r=0;r<e.length;r++)o=e[r],o<128&&t.push(m(o));var k=t.length,C=k;k&&t.push(f);while(C<c){var y=n;for(r=0;r<e.length;r++)o=e[r],o>=h&&o<y&&(y=o);var U=C+1;if(y-h>v((n-d)/U))throw RangeError(p);for(d+=(y-h)*U,h=y,r=0;r<e.length;r++){if(o=e[r],o<h&&++d>n)throw RangeError(p);if(o==h){for(var R=d,x=s;;x+=s){var L=x<=w?i:x>=w+a?a:x-w;if(R<L)break;var I=R-L,_=s-L;t.push(m(b(L+I%_))),R=v(I/_)}t.push(m(b(R))),w=A(d,U,C==k),d=0,++C}}++d,++h}return t.join("")};e.exports=function(e){var t,r,n=[],s=e.toLowerCase().replace(d,".").split(".");for(t=0;t<s.length;t++)r=s[t],n.push(h.test(r)?"xn--"+k(r):r);return n.join(".")}},"60b8":function(e,t,r){},8845:function(e,t,r){"use strict";var n=r("2fa3"),s=function(){return localStorage.getItem("token")};t["a"]={addFollowing:function(e){var t=e.userId;return n["b"].post("/followships",{id:t},{headers:{Authorization:"Bearer ".concat(s())}})},deleteFollowing:function(e){var t=e.userId;return n["b"].delete("/followships/".concat(t),{headers:{Authorization:"Bearer ".concat(s())}})}}},"88fd":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"recommend-users",style:[e.more?{height:71*e.topUsers.length+92+"px"}:{height:"447px"}]},[r("div",{staticClass:"title"},[e._v("跟隨誰")]),r("div",{staticClass:"list-group"},e._l(e.topUsers,(function(t,n){return r("div",{directives:[{name:"show",rawName:"v-show",value:!(!e.more&&n>4),expression:"!(!more && idx > 4)"}],key:t.id,staticClass:"list-group-item"},[r("div",{staticClass:"avatar",style:{background:"url("+t.avatar+") no-repeat center/cover"},on:{click:function(r){e.$router.push("/user/other/"+t.id).catch((function(){}))}}}),r("div",{staticClass:"info"},[r("div",{staticClass:"name",on:{click:function(r){e.$router.push("/user/other/"+t.id).catch((function(){}))}}},[e._v(e._s(t.name))]),r("div",{staticClass:"account",on:{click:function(r){e.$router.push("/user/other/"+t.id).catch((function(){}))}}},[e._v(e._s(t.account))])]),r("button",{directives:[{name:"show",rawName:"v-show",value:t.isFollowed,expression:"user.isFollowed"}],staticClass:"btn btn-follow unfollow",on:{click:function(r){return e.deleteFollowing(t.id)}}},[e._v("正在跟隨")]),r("button",{directives:[{name:"show",rawName:"v-show",value:!t.isFollowed,expression:"!user.isFollowed"}],staticClass:"btn btn-follow",on:{click:function(r){return e.addFollowing(t.id)}}},[e._v("跟隨")])])})),0),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.more,expression:"!more"}],staticClass:"footer",on:{click:function(t){e.more=!e.more}}},[e._v("顯示更多")]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.more,expression:"more"}],staticClass:"footer",on:{click:function(t){e.more=!e.more}}},[e._v("顯示更少")])])},s=[],i=(r("4de4"),r("d81d"),r("fb6a"),r("b0c0"),r("96cf"),r("1da1")),a=r("5530"),o=r("8845"),c=r("4cce"),u=r("2fa3"),l=r("2f62"),f={name:"RecommendUsers",data:function(){return{topUsers:[],more:!1}},created:function(){var e=this;this.fetchTopUsers(),this.$bus.$on("followAction",(function(t){e.followAction(t)}))},beforeDestroy:function(){this.$bus.$off("followAction")},computed:Object(a["a"])({},Object(l["b"])(["currentUser","isAuthenticated"])),methods:{fetchTopUsers:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$loading.show({isFullPage:!0,opacity:1},{default:e.$createElement("MyLoading")}),t.prev=1,t.next=4,c["a"].getTopUsers();case 4:n=t.sent,s=n.data,e.topUsers=s.users.map((function(e){return{id:e.id,name:e.name,avatar:e.avatar,account:e.account,followerCount:e.FollowerCount,isFollowed:e.isFollowed}})).filter((function(t){return t.id!==e.currentUser.id})).slice(0,8),r.hide(),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0),u["a"].fire({icon:"error",title:"目前無法為你推薦追蹤，請稍候"});case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},addFollowing:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o["a"].addFollowing({userId:e});case 3:if(n=r.sent,s=n.data,"success"===s.status){r.next=7;break}throw new Error(s.message);case 7:t.$bus.$emit("followAction",{type:"follow",userId:e,followship:s.followship}),s.followship.followerId>0&&s.followship.followingId!==t.currentUser.id&&t.$socket.emit("personal notification",{senderId:t.currentUser.id,titleData:"".concat(t.currentUser.name," 開始追蹤你"),url:"/user/self/follower",type:"follow",recipientId:s.followship.followingId}),t.topUsers=t.topUsers.map((function(t){return t.id!==e?t:Object(a["a"])(Object(a["a"])({},t),{},{followerCount:t.followerCount+1,isFollowed:!0})})),r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](0),u["a"].fire({icon:"error",title:"無法加入追蹤，請稍後再試"});case 15:case"end":return r.stop()}}),r,null,[[0,12]])})))()},deleteFollowing:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o["a"].deleteFollowing({userId:e});case 3:if(n=r.sent,s=n.data,"success"===s.status){r.next=7;break}throw new Error(s.message);case 7:t.$bus.$emit("followAction",{type:"unfollow",userId:e}),t.topUsers=t.topUsers.map((function(t){return t.id!==e?t:Object(a["a"])(Object(a["a"])({},t),{},{followerCount:t.followerCount-1,isFollowed:!1})})),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),u["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))()},followAction:function(e){this.topUsers=this.topUsers.map((function(t){return t.id!==e.userId?t:Object(a["a"])(Object(a["a"])({},t),{},{isFollowed:"follow"===e.type})}))}}},h=f,d=(r("46ed"),r("2877")),p=Object(d["a"])(h,n,s,!1,null,null,null);t["a"]=p.exports},9861:function(e,t,r){"use strict";r("e260");var n=r("23e7"),s=r("d066"),i=r("0d3b"),a=r("6eeb"),o=r("e2cc"),c=r("d44e"),u=r("9ed3"),l=r("69f3"),f=r("19aa"),h=r("5135"),d=r("0366"),p=r("f5df"),w=r("825a"),v=r("861d"),m=r("7c73"),g=r("5c6c"),b=r("9a1f"),A=r("35a1"),k=r("b622"),C=s("fetch"),y=s("Headers"),U=k("iterator"),R="URLSearchParams",x=R+"Iterator",L=l.set,I=l.getterFor(R),_=l.getterFor(x),$=/\+/g,O=Array(4),T=function(e){return O[e-1]||(O[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},S=function(e){try{return decodeURIComponent(e)}catch(t){return e}},j=function(e){var t=e.replace($," "),r=4;try{return decodeURIComponent(t)}catch(n){while(r)t=t.replace(T(r--),S);return t}},E=/[!'()~]|%20/g,F={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},B=function(e){return F[e]},P=function(e){return encodeURIComponent(e).replace(E,B)},D=function(e,t){if(t){var r,n,s=t.split("&"),i=0;while(i<s.length)r=s[i++],r.length&&(n=r.split("="),e.push({key:j(n.shift()),value:j(n.join("="))}))}},N=function(e){this.entries.length=0,D(this.entries,e)},M=function(e,t){if(e<t)throw TypeError("Not enough arguments")},Q=u((function(e,t){L(this,{type:x,iterator:b(I(e).entries),kind:t})}),"Iterator",(function(){var e=_(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r})),q=function(){f(this,q,R);var e,t,r,n,s,i,a,o,c,u=arguments.length>0?arguments[0]:void 0,l=this,d=[];if(L(l,{type:R,entries:d,updateURL:function(){},updateSearchParams:N}),void 0!==u)if(v(u))if(e=A(u),"function"===typeof e){t=e.call(u),r=t.next;while(!(n=r.call(t)).done){if(s=b(w(n.value)),i=s.next,(a=i.call(s)).done||(o=i.call(s)).done||!i.call(s).done)throw TypeError("Expected sequence with length 2");d.push({key:a.value+"",value:o.value+""})}}else for(c in u)h(u,c)&&d.push({key:c,value:u[c]+""});else D(d,"string"===typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")},W=q.prototype;o(W,{append:function(e,t){M(arguments.length,2);var r=I(this);r.entries.push({key:e+"",value:t+""}),r.updateURL()},delete:function(e){M(arguments.length,1);var t=I(this),r=t.entries,n=e+"",s=0;while(s<r.length)r[s].key===n?r.splice(s,1):s++;t.updateURL()},get:function(e){M(arguments.length,1);for(var t=I(this).entries,r=e+"",n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){M(arguments.length,1);for(var t=I(this).entries,r=e+"",n=[],s=0;s<t.length;s++)t[s].key===r&&n.push(t[s].value);return n},has:function(e){M(arguments.length,1);var t=I(this).entries,r=e+"",n=0;while(n<t.length)if(t[n++].key===r)return!0;return!1},set:function(e,t){M(arguments.length,1);for(var r,n=I(this),s=n.entries,i=!1,a=e+"",o=t+"",c=0;c<s.length;c++)r=s[c],r.key===a&&(i?s.splice(c--,1):(i=!0,r.value=o));i||s.push({key:a,value:o}),n.updateURL()},sort:function(){var e,t,r,n=I(this),s=n.entries,i=s.slice();for(s.length=0,r=0;r<i.length;r++){for(e=i[r],t=0;t<r;t++)if(s[t].key>e.key){s.splice(t,0,e);break}t===r&&s.push(e)}n.updateURL()},forEach:function(e){var t,r=I(this).entries,n=d(e,arguments.length>1?arguments[1]:void 0,3),s=0;while(s<r.length)t=r[s++],n(t.value,t.key,this)},keys:function(){return new Q(this,"keys")},values:function(){return new Q(this,"values")},entries:function(){return new Q(this,"entries")}},{enumerable:!0}),a(W,U,W.entries),a(W,"toString",(function(){var e,t=I(this).entries,r=[],n=0;while(n<t.length)e=t[n++],r.push(P(e.key)+"="+P(e.value));return r.join("&")}),{enumerable:!0}),c(q,R),n({global:!0,forced:!i},{URLSearchParams:q}),i||"function"!=typeof C||"function"!=typeof y||n({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,r,n,s=[e];return arguments.length>1&&(t=arguments[1],v(t)&&(r=t.body,p(r)===R&&(n=t.headers?new y(t.headers):new y,n.has("content-type")||n.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=m(t,{body:g(0,String(r)),headers:g(0,n)}))),s.push(t)),C.apply(this,s)}}),e.exports={URLSearchParams:q,getState:I}},"9a1f":function(e,t,r){var n=r("825a"),s=r("35a1");e.exports=function(e){var t=s(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return n(t.call(e))}},ab13:function(e,t,r){var n=r("b622"),s=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[s]=!1,"/./"[e](t)}catch(n){}}return!1}},b2e8:function(e,t,r){},b3d7:function(e,t,r){"use strict";r("16b0")},c058:function(e,t,r){"use strict";var n=r("2fa3"),s=function(){return localStorage.getItem("token")};t["a"]={likeTweet:function(e){var t=e.tweetId;return n["b"].post("/tweets/".concat(t,"/like"),null,{headers:{Authorization:"Bearer ".concat(s())}})},unlikeTweet:function(e){var t=e.tweetId;return n["b"].post("/tweets/".concat(t,"/unlike"),null,{headers:{Authorization:"Bearer ".concat(s())}})}}},ca8f:function(e,t,r){},caad:function(e,t,r){"use strict";var n=r("23e7"),s=r("4d64").includes,i=r("44d2"),a=r("ae40"),o=a("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!o},{includes:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},d81d:function(e,t,r){"use strict";var n=r("23e7"),s=r("b727").map,i=r("1dde"),a=r("ae40"),o=i("map"),c=a("map");n({target:"Array",proto:!0,forced:!o||!c},{map:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},e8f1:function(e,t,r){},eab0:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC6SURBVHgBxdVrCsQgDATgsBddb94jeITZCmuRPjSPCR0Qiil+fzQReTMAvvuq+9ratyRldPpGA8fQ8T96pG9WXEPDz+gIF9wnjN+hB5yFP6HNOv9Iw9UoEzejDNyNRvAw6sFpqAWnoxo8DVXgeagRL5KRBV6053zEHjhr/kwu0hjuSFWiXHyCFmSNVCjeKR2HoTnQcDg6UhhHoA26cRB6rxkHseGrcSRMmSWega7wXtwy0BneCzULfcJ/WRY3Zb6lM+UAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=chunk-64501114.7d630716.js.map