(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4063480e"],{"0fab":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAUASURBVHgB3VnNUttWFD7nCjtMsiFv4DxBzKSLLtrGZJVdYNlVTEM62eFFy1BcipiEBGhnCjsG6EQ8Qcyqq4I7Q5ah5gmivoG7arEsnZ4r+ede2fIfFmjyLZDuj2R9nJ9773cAPhEgjAEvCmbGSRtZIjEFI0CQZ9frbsXaMaswIkYiki+YUyKdzguEJ9zM8ktGIhAGAVSRoOwSHXuOUxqG2FBEFr57mUPDWOTbWYgZPimgkoPOurVp2v3mD0REWiB9K73GLy/ADYCIzMPt4nqvOX2J5Fc2sikX3/FtJmJKlQiO+edsTwgbhoTwiN2SphAwx19zH6Ld1HawNhNlnZ5Evl169ZRQWF2GquDRERmidLj5QxnGiIXlNzl+dx4RnnYZtnls7uDnYiU8EElkYelVAVH82jlCu3cuHXPnChlmELxYfpOpe2R2ECKqcgDNhMl0JfJs6eWsQONdaKLtIc6P2wL9wF5RYK9YA9XlmIwjnGnVzTqI5Pk/kSI6BSUmJAnB/rk3QPaIA885TpHjlPQ4tZ3L2nQzRYvwQ0xCulPrgZsmIXHwulghg+ZAxmYbmQnOpM2GZpFvvt/IGwLfqn0G1u7dJAkVz5Zes8uD5vIc/NMyXjSLMIk1tU1I60khIfHb9kpJJhu1jwT6CallkcaqfdpsS5fa31q5BwlD3jSnUv+mP4IS/Bwrd9sWEUZefUBaAxIIyzR5P6ZbZSKdKrSIYLABDMDp7WCzaEFCUbvt7Kht3hU88YlItwI1TyOUIMGQVuFLudWBkA0sIoysNhPhT0g86EJt+UQQKaPNcaECCYfrCe0bGzGC99VOx3FsSDgM8LoR0WHFvCEcBwxDaN8o4BNBgwj9o3bKEyEkHPV6PaO2fSJEqJlpchIST4SEoX1j07W0wKm5qRwkHAIpp7WDv65GxBDwEBIPPdP6ROqTPpG2exHMJjlO5OGPL7lWB0GwjZdLfqCENIA4JTdikFBM8FlebRPQsbL7dS11kLfxi0m0irQGb3A1158QjtUicri5WgZtI8ZWUY6SSUGaSCqdmXYPWfLwpy2IhK52BmGrFKQsBAmBtEZY7TRYUvWvauf52an94ItHd5nC580+RHz82Vcz9oezkwu4QSjqjuLuZO1v/XQk7zq2KAdbRclYS8fkCWthaePG3EzGasrzNNlWHsWb1mi0OyFVPo/ZU6fe21N/jQM+iXTqlF1DOzMR4owqFkZKpj3IyNdY5HpHh7+sliFGdBML/V9nPeFws2iqfT1F7ECxSPEDuNhtvFmY4Tx+QXw+QK+9qF61AiUFdA/FTriI1I2ExED1kefLG3kkXKPo0kInWMAg4c010vrA6FWLiSIhYcAAOD87qXx4/8fugy8f/c2KhfTV/gsl4iTPhfP3J8cwIKQIYqRSv/Pt49AQW979+mDrx72oZydgCDQkIktKl2xKKV8+HMpKEehlBdawKkI4c3tbvRPMUESaCKTLQDLy6xiSjEfZQMToHk9RaCicbyOSyu7+dnGgBXks5ekmJCmuyH5UPsTidWk+ar5cm3jBNaHzo4auxYxkkavCt4LgalhobQhAu7dHqIhdK5E+1eEqL3Kc5VbKMAKujUjvWIDSncva/FXqkrET6WcFTqvz+9urV9aaYyaCmdSt9F9xWUFF3BbJhTviqg5fs9IoM1JtOo4S97UEe9sKo2WkQTBWi/w3eSn9PeTz8VlBxf+wKjH68+xWgQAAAABJRU5ErkJggg=="},3963:function(e,t,r){"use strict";r("ddf7")},"43d6":function(e,t,r){},"46ed":function(e,t,r){"use strict";r("ca8f")},"5cad":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-container"},[r("Navbar"),r("SingleContent"),r("RecommendUsers")],1)},n=[],a=r("d178"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.tweet&&e.replies&&e.likes?s("div",{staticClass:"reply-main"},[s("div",{staticClass:"upper"},[s("img",{staticClass:"arrow",attrs:{src:r("beea"),alt:""},on:{click:function(t){return e.$router.go(-1)}}}),s("span",[e._v("推文")])]),s("hr"),s("div",{staticClass:"self-content"},[s("div",{staticClass:"self-info"},[s("img",{staticClass:"self-photo",attrs:{src:e.tweet.User?e.tweet.User.avatar:"",alt:""},on:{click:function(t){e.$router.push("/user/other/"+(e.tweet.User?e.tweet.User.id:"/")).catch((function(){}))}}}),s("div",{staticClass:"wrap"},[s("span",{staticClass:"name",on:{click:function(t){e.$router.push("/user/other/"+(e.tweet.User?e.tweet.User.id:"/")).catch((function(){}))}}},[e._v(e._s(e.tweet.User?e.tweet.User.name:""))]),s("span",{staticClass:"account",on:{click:function(t){e.$router.push("/user/other/"+(e.tweet.User?e.tweet.User.id:"/")).catch((function(){}))}}},[e._v(e._s(e.tweet.User?e.tweet.User.account:""))])])]),s("p",{staticClass:"tweet-content"},[e._v(e._s(e.tweet.description))]),s("span",{staticClass:"time"},[e._v(e._s(e._f("fromNow")(e.tweet.createdAt)))])]),s("hr"),s("div",{staticClass:"counts"},[s("span",{staticClass:"reply-counts"},[e._v(e._s(e.replies.count)+" 回覆")]),s("span",{staticClass:"like-counts"},[e._v(e._s(e.likes.count)+" 喜歡次數")])]),s("hr"),s("div",{staticClass:"icons"},[s("img",{staticClass:"conversation",attrs:{src:r("0fab"),alt:""},on:{click:e.afterClickNewReply}}),e.likes.rows?s("img",{directives:[{name:"show",rawName:"v-show",value:!e.likes.rows.map((function(e){return e.UserId})).includes(this.currentUser.id),expression:"!likes.rows.map(like => like.UserId).includes(this.currentUser.id)"}],staticClass:"heart",attrs:{src:r("6424"),alt:""},on:{click:function(t){return e.likeTweet(e.tweet.id)}}}):e._e(),e.likes.rows?s("div",{directives:[{name:"show",rawName:"v-show",value:e.likes.rows.map((function(e){return e.UserId})).includes(this.currentUser.id),expression:"likes.rows.map(like => like.UserId).includes(this.currentUser.id)"}],staticClass:"icon heart liked",on:{click:function(t){return e.unlikeTweet(e.tweet.id)}}}):e._e()]),s("div",{staticClass:"replies"},e._l(e.replies.rows,(function(t,r){return s("div",{key:"reply_"+r,staticClass:"single-reply"},[s("img",{attrs:{src:t.User?t.User.avatar:""},on:{click:function(r){e.$router.push("/user/other/"+(t.User?t.User.id:"/")).catch((function(){}))}}}),s("div",{staticClass:"reply-content"},[s("div",{staticClass:"title"},[s("span",{staticClass:"name",on:{click:function(r){e.$router.push("/user/other/"+(t.User?t.User.id:"/")).catch((function(){}))}}},[e._v(e._s(t.User?t.User.name:""))]),s("span",{staticClass:"account",on:{click:function(r){e.$router.push("/user/other/"+(t.User?t.User.id:"/")).catch((function(){}))}}},[e._v(e._s(t.User?t.User.account:""))]),s("span",{staticClass:"time"},[e._v("・"+e._s(e._f("fromNow")(t.createdAt)))])]),s("span",{staticClass:"to-whom"},[e._v("回覆 "),s("span",{staticClass:"receiver"},[e._v(e._s(e.tweet.User?e.tweet.User.account:""))])]),s("p",{staticClass:"reply-item"},[e._v(e._s(t.comment))])])])})),0),e.showNewReplyModal?s("ModalForReplyTweet",{attrs:{tweet:e.tweet},on:{replyTweet:e.replyTweet,"after-click-cross":e.afterClickCross}}):e._e()],1):e._e()},o=[],c=(r("4de4"),r("b0c0"),r("96cf"),r("1da1")),l=r("5530"),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal reply"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("img",{staticClass:"cross",attrs:{src:r("f294"),alt:""},on:{click:e.cancelModalClick}})]),s("hr"),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"content-of-other"},[s("div",{staticClass:"other-info"},[s("img",{attrs:{src:e.tweet.User.avatar,alt:""},on:{click:function(t){e.$router.push("/user/other/"+(e.tweet.User?e.tweet.User.id:"/")).catch((function(){}))}}}),s("div",{staticClass:"text-wrap"},[s("div",{staticClass:"title-wrap"},[s("span",{staticClass:"name",on:{click:function(t){e.$router.push("/user/other/"+(e.tweet.User?e.tweet.User.id:"/")).catch((function(){}))}}},[e._v(e._s(e.tweet.User.name))]),s("span",{staticClass:"account",on:{click:function(t){e.$router.push("/user/other/"+(e.tweet.User?e.tweet.User.id:"/")).catch((function(){}))}}},[e._v(e._s(e.tweet.User.account))]),s("span",{staticStyle:{margin:"0 2px",color:"#657786"}},[e._v(" •")]),s("span",{staticClass:"time"},[e._v(" "+e._s(e._f("fromNow")(e.tweet.createdAt)))])]),s("p",[e._v(e._s(e.tweet.description))]),s("div",{staticClass:"to-whom"},[s("span",[e._v("回覆給 ")]),s("span",{staticClass:"receiver"},[e._v(e._s(e.tweet.User.name))])])])])]),s("div",{staticClass:"content-of-mine"},[s("img",{staticClass:"photo-of-mine",attrs:{src:e.currentUser.avatar,alt:""}}),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.replyContent,expression:"replyContent"}],staticClass:"tweet-content",attrs:{type:"textarea",placeholder:"推你的回覆",name:"",id:""},domProps:{value:e.replyContent},on:{input:function(t){t.target.composing||(e.replyContent=t.target.value)}}}),s("button",{on:{click:function(t){return t.preventDefault(),e.replyTweet(t)}}},[e._v("推文")])])])])])},d=[],w=r("2f62"),p={name:"ModalForReplyTweet",data:function(){return{replyContent:""}},props:{tweet:{type:Object}},computed:Object(l["a"])({},Object(w["b"])(["currentUser","isAuthenticated"])),methods:{cancelModalClick:function(){this.$emit("after-click-cross")},replyTweet:function(){this.$emit("replyTweet",this.replyContent)}}},f=p,A=(r("81c8"),r("2877")),h=Object(A["a"])(f,u,d,!1,null,null,null),m=h.exports,v=r("c058"),k=r("6783"),U=r("2fa3"),C={components:{ModalForReplyTweet:m},data:function(){return{showNewReplyModal:!1,tweetId:"",tweet:{},replies:{},likes:{},comments:{}}},watch:{"$route.params.id":function(){this.tweetId=this.$route.params.id,this.fetchTweet(this.tweetId)}},computed:Object(l["a"])({},Object(w["b"])(["currentUser","isAuthenticated"])),mounted:function(){this.tweetId=this.$route.params.id,this.fetchTweet(this.tweetId)},methods:{afterClickCross:function(){this.showNewReplyModal=!1},afterClickNewReply:function(){this.showNewReplyModal=!0},fetchTweet:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,k["a"].getTweet({tweetId:e});case 3:s=r.sent,t.tweet=Object(l["a"])({},s.data.tweet),t.replies=Object(l["a"])({},s.data.replies),t.replies.rows.sort((function(e,t){return e.createdAt<t.createdAt?1:-1})),t.likes=Object(l["a"])({},s.data.likes),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),U["a"].fire({icon:"error",title:"無法取得資料，請稍後再試"});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},replyTweet:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var s,n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(s=t.$route.params.id,r.prev=1,e){r.next=5;break}return U["a"].fire({icon:"error",title:"請輸入內容"}),r.abrupt("return");case 5:return r.next=7,k["a"].postReply({tweetId:s,comment:e});case 7:if(n=r.sent,a=n.data,"success"===a.status){r.next=11;break}throw new Error(a.message);case 11:return a.tweet.UserId>0&&a.tweet.UserId!==t.currentUser.id&&t.$socket.emit("personal notification",{senderId:t.currentUser.id,titleData:"你的貼文有新的回覆",contentData:e,url:"/reply_list/".concat(s),type:"reply",recipientId:a.tweet.UserId}),t.replies=Object(l["a"])(Object(l["a"])({},t.replies),{},{userId:t.currentUser.id,comment:e}),t.replies.rows.length>0&&(t.replies.rows=t.replies.rows.filter((function(e){return e.UserId!==t.currentUser.id}))),console.log(t.replies),t.$socket.emit("reply notification",t.replies),r.next=18,t.fetchTweet(t.tweetId);case 18:t.showNewReplyModal=!1,r.next=25;break;case 21:r.prev=21,r.t0=r["catch"](1),console.log(r.t0),U["a"].fire({icon:"error",title:"目前無法回覆，請稍候"});case 25:case"end":return r.stop()}}),r,null,[[1,21]])})))()},likeTweet:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,v["a"].likeTweet({tweetId:e});case 3:if(s=r.sent,n=s.data,"success"===n.status){r.next=7;break}throw new Error(n.message);case 7:t.$bus.$emit("tweetAction",{type:"like",tweetId:e}),n.tweet.UserId>0&&n.tweet.UserId!==t.currentUser.id&&t.$socket.emit("personal notification",{senderId:t.currentUser.id,titleData:"".concat(t.currentUser.name," 喜歡你的貼文"),url:"/reply_list/".concat(e),type:"like",recipientId:n.tweet.UserId}),r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](0),console.log(r.t0),U["a"].fire({icon:"error",title:"無法按讚推文，請稍後再試"});case 15:return r.next=17,t.fetchTweet(t.tweetId);case 17:case"end":return r.stop()}}),r,null,[[0,11]])})))()},unlikeTweet:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,v["a"].unlikeTweet({tweetId:e});case 3:if(s=r.sent,n=s.data,"success"===n.status){r.next=7;break}throw new Error(n.message);case 7:t.$bus.$emit("tweetAction",{type:"unlike",tweetId:e}),r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0),U["a"].fire({icon:"error",title:"無法取消按讚，請稍後再試"});case 14:return r.next=16,t.fetchTweet(t.tweetId);case 16:case"end":return r.stop()}}),r,null,[[0,10]])})))()}}},g=C,I=(r("3963"),Object(A["a"])(g,i,o,!1,null,null,null)),b=I.exports,x=r("88fd"),E={components:{Navbar:a["a"],SingleContent:b,RecommendUsers:x["a"]}},y=E,R=(r("9fdc"),Object(A["a"])(y,s,n,!1,null,null,null));t["default"]=R.exports},6424:function(e,t){e.exports="data:image/png;base64,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"},7359:function(e,t,r){},"81c8":function(e,t,r){"use strict";r("43d6")},8845:function(e,t,r){"use strict";var s=r("2fa3"),n=function(){return localStorage.getItem("token")};t["a"]={addFollowing:function(e){var t=e.userId;return s["b"].post("/followships",{id:t},{headers:{Authorization:"Bearer ".concat(n())}})},deleteFollowing:function(e){var t=e.userId;return s["b"].delete("/followships/".concat(t),{headers:{Authorization:"Bearer ".concat(n())}})}}},"88fd":function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"recommend-users",style:[e.more?{height:71*e.topUsers.length+92+"px"}:{height:"447px"}]},[r("div",{staticClass:"title"},[e._v("跟隨誰")]),r("div",{staticClass:"list-group"},e._l(e.topUsers,(function(t,s){return r("div",{directives:[{name:"show",rawName:"v-show",value:!(!e.more&&s>4),expression:"!(!more && idx > 4)"}],key:t.id,staticClass:"list-group-item"},[r("div",{staticClass:"avatar",style:{background:"url("+t.avatar+") no-repeat center/cover"},on:{click:function(r){e.$router.push("/user/other/"+t.id).catch((function(){}))}}}),r("div",{staticClass:"info"},[r("div",{staticClass:"name",on:{click:function(r){e.$router.push("/user/other/"+t.id).catch((function(){}))}}},[e._v(e._s(t.name))]),r("div",{staticClass:"account",on:{click:function(r){e.$router.push("/user/other/"+t.id).catch((function(){}))}}},[e._v(e._s(t.account))])]),r("button",{directives:[{name:"show",rawName:"v-show",value:t.isFollowed,expression:"user.isFollowed"}],staticClass:"btn btn-follow unfollow",on:{click:function(r){return e.deleteFollowing(t.id)}}},[e._v("正在跟隨")]),r("button",{directives:[{name:"show",rawName:"v-show",value:!t.isFollowed,expression:"!user.isFollowed"}],staticClass:"btn btn-follow",on:{click:function(r){return e.addFollowing(t.id)}}},[e._v("跟隨")])])})),0),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.more,expression:"!more"}],staticClass:"footer",on:{click:function(t){e.more=!e.more}}},[e._v("顯示更多")]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.more,expression:"more"}],staticClass:"footer",on:{click:function(t){e.more=!e.more}}},[e._v("顯示更少")])])},n=[],a=(r("4de4"),r("d81d"),r("fb6a"),r("b0c0"),r("96cf"),r("1da1")),i=r("5530"),o=r("8845"),c=r("4cce"),l=r("2fa3"),u=r("2f62"),d={name:"RecommendUsers",data:function(){return{topUsers:[],more:!1}},created:function(){var e=this;this.fetchTopUsers(),this.$bus.$on("followAction",(function(t){e.followAction(t)}))},beforeDestroy:function(){this.$bus.$off("followAction")},computed:Object(i["a"])({},Object(u["b"])(["currentUser","isAuthenticated"])),methods:{fetchTopUsers:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$loading.show({isFullPage:!0,opacity:1},{default:e.$createElement("MyLoading")}),t.prev=1,t.next=4,c["a"].getTopUsers();case 4:s=t.sent,n=s.data,e.topUsers=n.users.map((function(e){return{id:e.id,name:e.name,avatar:e.avatar,account:e.account,followerCount:e.FollowerCount,isFollowed:e.isFollowed}})).filter((function(t){return t.id!==e.currentUser.id})).slice(0,8),r.hide(),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0),l["a"].fire({icon:"error",title:"目前無法為你推薦追蹤，請稍候"});case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},addFollowing:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o["a"].addFollowing({userId:e});case 3:if(s=r.sent,n=s.data,"success"===n.status){r.next=7;break}throw new Error(n.message);case 7:t.$bus.$emit("followAction",{type:"follow",userId:e,followship:n.followship}),n.followship.followerId>0&&n.followship.followingId!==t.currentUser.id&&t.$socket.emit("personal notification",{senderId:t.currentUser.id,titleData:"".concat(t.currentUser.name," 開始追蹤你"),url:"/user/self/follower",type:"follow",recipientId:n.followship.followingId}),t.topUsers=t.topUsers.map((function(t){return t.id!==e?t:Object(i["a"])(Object(i["a"])({},t),{},{followerCount:t.followerCount+1,isFollowed:!0})})),r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](0),l["a"].fire({icon:"error",title:"無法加入追蹤，請稍後再試"});case 15:case"end":return r.stop()}}),r,null,[[0,12]])})))()},deleteFollowing:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o["a"].deleteFollowing({userId:e});case 3:if(s=r.sent,n=s.data,"success"===n.status){r.next=7;break}throw new Error(n.message);case 7:t.$bus.$emit("followAction",{type:"unfollow",userId:e}),t.topUsers=t.topUsers.map((function(t){return t.id!==e?t:Object(i["a"])(Object(i["a"])({},t),{},{followerCount:t.followerCount-1,isFollowed:!1})})),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),l["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))()},followAction:function(e){this.topUsers=this.topUsers.map((function(t){return t.id!==e.userId?t:Object(i["a"])(Object(i["a"])({},t),{},{isFollowed:"follow"===e.type})}))}}},w=d,p=(r("46ed"),r("2877")),f=Object(p["a"])(w,s,n,!1,null,null,null);t["a"]=f.exports},"9fdc":function(e,t,r){"use strict";r("7359")},beea:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAcCAYAAAAEN20fAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB5SURBVHgB7dfBCYAwEETR0Qoswc6SzreEpAPNQg5R4kGFnct8GMnNBwoi8L7UVtqsnyn5jY9hBYTuCJ8huBnClxGYEEIIIcRXRNTMDUs/7OBW13bZwK/6JYP7aAqGd/EJk0AoQxhhhBEmHkP5r5lhDMRyB1y+EX87AdxCwzt7prpuAAAAAElFTkSuQmCC"},c058:function(e,t,r){"use strict";var s=r("2fa3"),n=function(){return localStorage.getItem("token")};t["a"]={likeTweet:function(e){var t=e.tweetId;return s["b"].post("/tweets/".concat(t,"/like"),null,{headers:{Authorization:"Bearer ".concat(n())}})},unlikeTweet:function(e){var t=e.tweetId;return s["b"].post("/tweets/".concat(t,"/unlike"),null,{headers:{Authorization:"Bearer ".concat(n())}})}}},ca8f:function(e,t,r){},d81d:function(e,t,r){"use strict";var s=r("23e7"),n=r("b727").map,a=r("1dde"),i=r("ae40"),o=a("map"),c=i("map");s({target:"Array",proto:!0,forced:!o||!c},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},ddf7:function(e,t,r){},f294:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAENSURBVHgBxdfLEYIwEAbgf6nAEuxMPOjdDijBsx6MldmCHWCCBHmEZDdsxj0AG5Z8M5lkZwD+FOQu7RkHtLja7G3Thm54okCMHQ+/7G0/qqm18Q4FjM+r7yh2szrTFxZBfzBwCdSr4CHUBQ0FJ9Q2ewS+zV72NdSu8JEmuSIeRe8wtBhXwFOoe6TghxtwDroK5+JcNApLcQmahLm4FGXBKby/GwhQNpzAIUVFMBtnoGI4iTNRFxWkQXb6nHeLUkGs7t5psDocf3PxUDbOO06Rc9rPIm6v6QbCaA457ZW2osOQECcNNAcnLVSKkyYqwUkb5eJUAmXhpdAU7nt1gwKoi24O32gW8PxPQgmN4R+H8M/Gca8TfQAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=chunk-4063480e.3c9a5d6e.js.map