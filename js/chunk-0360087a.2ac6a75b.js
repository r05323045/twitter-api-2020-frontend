(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0360087a"],{"02e1":function(e,t,n){"use strict";n("fe27")},7696:function(e,t,n){"use strict";var s=n("2fa3");t["a"]={signIn:function(e){var t=e.account,n=e.password;return s["b"].post("/signin",{account:t,password:n})},signUp:function(e){return s["b"].post("/users",e)}}},"98b3":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"signin"},[n("div",{staticClass:"signin-container"},[e._m(0),n("div",{staticClass:"title"},[e.routeIsAdmin?e._e():n("span",[e._v("登入 Alphitter")]),e.routeIsAdmin?n("span",[e._v("後台登入")]):e._e()]),n("form",[n("div",{staticClass:"form-group"},[e.routeIsAdmin?e._e():n("label",{directives:[{name:"show",rawName:"v-show",value:!e.accountFocus&&""===e.account,expression:"!accountFocus && account === ''"}],staticClass:"account"},[e._v("帳號")]),e.routeIsAdmin?n("label",{directives:[{name:"show",rawName:"v-show",value:!e.accountFocus&&""===e.email,expression:"!accountFocus && email === ''"}],staticClass:"account"},[e._v("Email")]):e._e(),e.routeIsAdmin?e._e():n("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],ref:"account",staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.account},on:{focus:function(t){return e.checkFocus("account")},blur:function(t){return e.checkBlur("account")},input:function(t){t.target.composing||(e.account=t.target.value)}}}),e.routeIsAdmin?n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],ref:"email",staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.email},on:{focus:function(t){return e.checkFocus("email")},blur:function(t){return e.checkBlur("email")},input:function(t){t.target.composing||(e.email=t.target.value)}}}):e._e(),n("label",{directives:[{name:"show",rawName:"v-show",value:!e.passwordFocus&&""===e.password,expression:"!passwordFocus && password === ''"}],staticClass:"password"},[e._v("密碼")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],ref:"password",staticClass:"form-control",attrs:{type:"password"},domProps:{value:e.password},on:{focus:function(t){return e.checkFocus("password")},blur:function(t){return e.checkBlur("password")},input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e.routeIsAdmin?e._e():n("button",{staticClass:"btn btn-signin user",attrs:{disabled:e.isProcessing,type:"submit"},on:{click:function(t){return t.preventDefault(),e.signin(t)}}},[e._v("登入")]),e.routeIsAdmin?n("button",{staticClass:"btn btn-signin admin",attrs:{disabled:e.isProcessing,type:"submit"},on:{click:function(t){return t.preventDefault(),e.adminSignin(t)}}},[e._v("登入")]):e._e()]),n("div",{staticClass:"link"},[e.routeIsAdmin?e._e():n("span",{on:{click:function(t){e.$router.push("/signup").catch((function(){}))}}},[e._v("註冊 Alphitter")]),e.routeIsAdmin?e._e():n("p",[e._v("•")]),e.routeIsAdmin?e._e():n("span",{on:{click:function(t){e.$router.push("/admin/signin").catch((function(){}))}}},[e._v("後台登入")]),e.routeIsAdmin?n("span",{on:{click:function(t){e.$router.push("/signin").catch((function(){}))}}},[e._v("前台登入")]):e._e()])])])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"logo"},[n("div",{staticClass:"icon logo"})])}],a=(n("96cf"),n("1da1")),o=n("7696"),i=n("be6c"),c=n("2fa3"),u={data:function(){return{accountFocus:!1,passwordFocus:!1,account:"@",email:"",password:"",routeIsAdmin:"/admin/signin"===this.$route.path,isProcessing:!1}},created:function(){var e=this;this.$nextTick((function(){e.routeIsAdmin?e.$refs.email.focus():e.$refs.account.focus()}))},methods:{checkFocus:function(e){"account"===e||"email"===e?(this.accountFocus=!0,this.passwordFocus=!1):"password"===e&&(this.accountFocus=!1,this.passwordFocus=!0)},checkBlur:function(e){"account"===e||"email"===e?this.accountFocus=!1:"password"===e&&(this.passwordFocus=!1)},signin:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.account&&e.password){t.next=4;break}return c["a"].fire({icon:"warning",title:"請填入帳號和密碼"}),t.abrupt("return");case 4:return t.next=6,o["a"].signIn({account:e.account,password:e.password});case 6:if(n=t.sent,s=n.data,"success"===s.status&&"admin"!==s.user.role){t.next=11;break}throw e.password="",new Error(s.message);case 11:localStorage.setItem("token",s.token),e.$store.commit("setCurrentUser",s.user),r="/main",e.$router.push(r),t.next=22;break;case 17:t.prev=17,t.t0=t["catch"](0),e.password="",e.isProcessing=!1,c["a"].fire({icon:"warning",title:"請確認您輸入了正確的帳號密碼"});case 22:case"end":return t.stop()}}),t,null,[[0,17]])})))()},adminSignin:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.email&&e.password){t.next=4;break}return c["a"].fire({icon:"warning",title:"請填入Email和密碼"}),t.abrupt("return");case 4:return t.next=6,i["a"].signIn({email:e.email,password:e.password});case 6:if(n=t.sent,s=n.data,"success"===s.status){t.next=11;break}throw e.password="",new Error(s.message);case 11:localStorage.setItem("token",s.token),e.$store.commit("setCurrentUser",s.user),e.$router.push("/admin/main"),t.next=21;break;case 16:t.prev=16,t.t0=t["catch"](0),e.password="",e.isProcessing=!1,c["a"].fire({icon:"warning",title:"請確認您輸入了正確的Email和密碼"});case 21:case"end":return t.stop()}}),t,null,[[0,16]])})))()}}},l=u,d=(n("02e1"),n("2877")),m=Object(d["a"])(l,s,r,!1,null,null,null);t["default"]=m.exports},be6c:function(e,t,n){"use strict";var s=n("2fa3"),r=function(){return localStorage.getItem("token")};t["a"]={getTweets:function(){return s["b"].get("/admin/tweets",{headers:{Authorization:"Bearer ".concat(r())}})},deleteTweet:function(e){var t=e.tweetId;return s["b"].delete("/admin/tweets/".concat(t),{headers:{Authorization:"Bearer ".concat(r())}})},getUsers:function(){return s["b"].get("/admin/users",{headers:{Authorization:"Bearer ".concat(r())}})},signIn:function(e){var t=e.email,n=e.password;return s["b"].post("/admin/signin",{email:t,password:n})}}},fe27:function(e,t,n){}}]);
//# sourceMappingURL=chunk-0360087a.2ac6a75b.js.map