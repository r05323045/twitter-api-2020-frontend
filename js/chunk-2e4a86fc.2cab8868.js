(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e4a86fc"],{"0b2a":function(e,t,r){},"149c":function(e,t,r){},"4ef5":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-setting"},[r("Navbar"),r("SubSetting")],1)},s=[],n=r("d178"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[e._m(0),r("div",{staticClass:"content"},[r("form",{ref:"settingForm"},[r("div",{staticClass:"form-label-group mb-2"},[r("label",{attrs:{for:"account"}},[e._v("帳號")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.account,expression:"user.account"}],staticClass:"form-control",attrs:{id:"account",name:"account",type:"text",required:""},domProps:{value:e.user.account},on:{input:function(t){t.target.composing||e.$set(e.user,"account",t.target.value)}}})]),r("div",{staticClass:"form-label-group mb-2"},[r("label",{attrs:{for:"name"}},[e._v("名稱")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],staticClass:"form-control",attrs:{id:"name",name:"name",type:"text",required:""},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}})]),r("div",{staticClass:"form-label-group mb-2"},[r("label",{attrs:{for:"email"}},[e._v("Email")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{id:"email",name:"email",type:"email",required:""},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})]),r("div",{staticClass:"form-label-group mb-3"},[r("label",{attrs:{for:"password"}},[e._v("密碼")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{id:"password",name:"password",type:"password",placeholder:"",required:""},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),r("div",{staticClass:"form-label-group mb-3"},[r("label",{attrs:{for:"password-check"}},[e._v("密碼確認")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmedPassword,expression:"confirmedPassword"}],staticClass:"form-control",attrs:{id:"password-check",name:"passwordCheck",type:"password",required:""},domProps:{value:e.confirmedPassword},on:{input:function(t){t.target.composing||(e.confirmedPassword=t.target.value)}}})]),r("div",{staticClass:"link"},[r("div",{staticClass:"save-button",on:{click:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[e._v("儲存")])])])])])},o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header"},[r("h3",[e._v("帳戶設定")])])}],c=(r("b0c0"),r("96cf"),r("1da1")),u=r("5530"),l=r("2fa3"),d=r("4cce"),m=r("2f62"),p={data:function(){return{user:{},confirmedPassword:""}},props:{initialUser:{type:Object}},created:function(){this.fetchUserSetting(this.currentUser.id)},computed:Object(u["a"])({},Object(m["b"])(["currentUser","isAuthenticated"])),methods:{fetchUserSetting:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.$loading.show({isFullPage:!0,opacity:1},{default:t.$createElement("MyLoading")}),r.prev=1,r.next=4,d["a"].getSettingPage({userId:e});case 4:s=r.sent,n=s.data,t.user=Object(u["a"])(Object(u["a"])({},n[0]),{},{password:""}),a.hide(),r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](1),a.hide(),l["a"].fire({icon:"error",title:"無法取得使用者資料，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[1,10]])})))()},handleSubmit:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$loading.show({isFullPage:!0,opacity:1},{default:e.$createElement("MyLoading")}),t.prev=1,!(e.user.account.length>15)){t.next=6;break}return r.hide(),l["a"].fire({icon:"warning",title:"帳號限定使用15個字"}),t.abrupt("return");case 6:if(!(e.user.name.length>50)){t.next=10;break}return r.hide(),l["a"].fire({icon:"warning",title:"名字限定使用50個字"}),t.abrupt("return");case 10:if(e.user.account&&e.user.name&&e.user.email){t.next=14;break}return r.hide(),l["a"].fire({icon:"warning",title:"所有欄位為必填"}),t.abrupt("return");case 14:if(e.user.password===e.confirmedPassword){t.next=18;break}return r.hide(),l["a"].fire({icon:"warning",title:"密碼與確認密碼不符"}),t.abrupt("return");case 18:return a={name:e.user.name,account:e.user.account,email:e.user.email,confirmedPassword:e.confirmedPassword},e.user.password===e.confirmedPassword&&(a.password=e.user.password),t.next=22,d["a"].putSetting({userId:e.currentUserid,formData:a});case 22:if(s=t.sent,n=s.data,"success"===n.status){t.next=29;break}throw r.hide(),new Error(n.message);case 29:r.hide(),l["a"].fire({icon:"success",title:"更新成功"});case 31:e.$store.commit("setCurrentUser",e.user),t.next=38;break;case 34:t.prev=34,t.t0=t["catch"](1),r.hide(),l["a"].fire({icon:"error",title:t.t0});case 38:case"end":return t.stop()}}),t,null,[[1,34]])})))()}}},f=p,v=(r("a14c"),r("2877")),w=Object(v["a"])(f,i,o,!1,null,null,null),b=w.exports,g={name:"Setting",components:{Navbar:n["a"],SubSetting:b},methods:{}},h=g,x=(r("a299"),Object(v["a"])(h,a,s,!1,null,null,null));t["default"]=x.exports},a14c:function(e,t,r){"use strict";r("149c")},a299:function(e,t,r){"use strict";r("0b2a")}}]);
//# sourceMappingURL=chunk-2e4a86fc.2cab8868.js.map