{"version":3,"sources":["webpack:///./src/components/TweetList.vue?1b85","webpack:///./src/components/RecommendUsers.vue?1a4c","webpack:///./src/components/TweetList.vue?aba8","webpack:///src/components/TweetList.vue","webpack:///./src/components/TweetList.vue?0676","webpack:///./src/components/TweetList.vue?293d","webpack:///./src/apis/followships.js","webpack:///./src/components/RecommendUsers.vue?964b","webpack:///src/components/RecommendUsers.vue","webpack:///./src/components/RecommendUsers.vue?aacb","webpack:///./src/components/RecommendUsers.vue?c398","webpack:///./src/views/Main.vue?2b16","webpack:///./src/apis/likes.js","webpack:///./src/views/Main.vue?54b7","webpack:///src/views/Main.vue","webpack:///./src/views/Main.vue?7343","webpack:///./src/views/Main.vue?663b","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","tweet","key","Math","random","on","$event","tweetDetail","style","background","stopPropagation","$router","push","catch","_v","_s","name","account","_f","createdAt","directives","rawName","value","type","expression","replyTo","description","replyTweetCount","isLiked","likeTweet","id","unlikeTweet","likeTweetCount","_e","staticRenderFns","props","tweets","Array","default","isReply","Boolean","computed","methods","component","getToken","localStorage","getItem","addFollowing","userId","apiHelper","post","headers","Authorization","deleteFollowing","delete","more","height","topUsers","length","user","idx","isFollowed","data","created","fetchTopUsers","$bus","$on","beforeDestroy","$off","followAction","map","action","tweetId","currentUser","attrs","domProps","target","composing","tweetDescription","preventDefault","postTweet","tweetAction","components","Navbar","RecommendUsers","TweetList","watch","checkTextLength","fetchTweets","slice","icon","title","$","$map","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","proto","forced","callbackfn","arguments","undefined"],"mappings":"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","file":"js/chunk-4ea5de81.4f62c1f5.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetList.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecommendUsers.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.tweets)?_c('div',{staticClass:\"tweet-list\"},_vm._l((_vm.tweets),function(tweet){return _c('div',{key:((tweet.id) + \"-\" + (Math.random())),staticClass:\"list-item\",on:{\"click\":function($event){return _vm.tweetDetail(tweet)}}},[_c('div',{staticClass:\"avatar\",style:({ background: (\"url(\" + (tweet.avatar) + \") no-repeat center/cover\") }),on:{\"click\":function($event){$event.stopPropagation();_vm.$router.push((\"/user/other/\" + (tweet.userId))).catch(function (){})}}}),_c('div',{staticClass:\"tweet-wrapper\"},[_c('div',{staticClass:\"info\"},[_c('div',{staticClass:\"name\",on:{\"click\":function($event){_vm.$router.push((\"/user/other/\" + (tweet.userId))).catch(function (){})}}},[_vm._v(_vm._s(tweet.name))]),_c('div',{staticClass:\"account-and-post-time\"},[_c('span',{staticClass:\"account\",on:{\"click\":function($event){_vm.$router.push((\"/user/other/\" + (tweet.userId))).catch(function (){})}}},[_vm._v(_vm._s(tweet.account)+\" \")]),_vm._v(\"• \"),_c('span',[_vm._v(_vm._s(_vm._f(\"fromNow\")(tweet.createdAt)))])])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(tweet.type === 'reply'),expression:\"tweet.type === 'reply'\"}],staticClass:\"reply-to-wrapper\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"回覆 \")]),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(tweet.replyTo))])]),_c('div',{staticClass:\"content\"},[_vm._v(_vm._s(tweet.description))]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(tweet.type !== 'reply'),expression:\"tweet.type !== 'reply'\"}],staticClass:\"action\"},[_c('div',{staticClass:\"reply-wrapper\"},[_c('div',{staticClass:\"icon reply\"}),_c('span',{staticClass:\"number\"},[_vm._v(_vm._s(tweet.replyTweetCount))])]),_c('div',{staticClass:\"like-wrapper\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!tweet.isLiked),expression:\"!tweet.isLiked\"}],staticClass:\"icon like\",on:{\"click\":function($event){$event.stopPropagation();return _vm.likeTweet(tweet.id)}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(tweet.isLiked),expression:\"tweet.isLiked\"}],staticClass:\"icon like liked\",on:{\"click\":function($event){$event.stopPropagation();return _vm.unlikeTweet(tweet.id)}}}),_c('span',{staticClass:\"number\"},[_vm._v(_vm._s(tweet.likeTweetCount))])])])])])}),0):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"tweet-list\" v-if=\"tweets\">\n    <div v-for=\"tweet in tweets\" :key=\"`${tweet.id}-${Math.random()}`\" class=\"list-item\" @click=\"tweetDetail(tweet)\">\n      <div class=\"avatar\" :style=\"{ background: `url(${tweet.avatar}) no-repeat center/cover` }\" @click.stop=\"$router.push(`/user/other/${tweet.userId}`).catch(()=>{})\"></div>\n      <div class=\"tweet-wrapper\">\n        <div class=\"info\">\n          <div class=\"name\" @click=\"$router.push(`/user/other/${tweet.userId}`).catch(()=>{})\">{{ tweet.name }}</div>\n          <div class=\"account-and-post-time\">\n            <span class=\"account\" @click=\"$router.push(`/user/other/${tweet.userId}`).catch(()=>{})\">{{ tweet.account }} </span>&bull;\n            <span>{{ tweet.createdAt | fromNow }}</span>\n          </div>\n        </div>\n        <div class=\"reply-to-wrapper\" v-show=\"tweet.type === 'reply'\">\n          <span class=\"title\">回覆 </span>\n          <span class=\"name\">{{ tweet.replyTo }}</span>\n        </div>\n        <div class=\"content\">{{ tweet.description}}</div>\n        <div class=\"action\" v-show=\"tweet.type !== 'reply'\">\n          <div class=\"reply-wrapper\">\n            <div class=\"icon reply\"></div>\n            <span class=\"number\">{{ tweet.replyTweetCount }}</span>\n          </div>\n          <div class=\"like-wrapper\">\n            <div v-show=\"!tweet.isLiked\" class=\"icon like\" @click.stop=\"likeTweet(tweet.id)\"></div>\n            <div v-show=\"tweet.isLiked\" class=\"icon like liked\" @click.stop=\"unlikeTweet(tweet.id)\"></div>\n            <span class=\"number\">{{ tweet.likeTweetCount }}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport likesAPI from '@/apis/likes'\nimport { Toast } from '@/utils/helpers'\nimport { mapState } from 'vuex'\n\nexport default {\n  name: 'TweetList',\n  props: {\n    tweets: {\n      type: Array,\n      default: () => {\n        return []\n      }\n    },\n    isReply: Boolean\n  },\n  computed: {\n    ...mapState(['currentUser', 'isAuthenticated'])\n  },\n  methods: {\n    tweetDetail (tweet) {\n      if (this.isReply) {\n        this.$router.push(`/reply_list/${tweet.TweetId}`)\n      } else {\n        this.$router.push(`/reply_list/${tweet.id}`)\n      }\n    },\n    async likeTweet (tweetId) {\n      try {\n        const { data } = await likesAPI.likeTweet({ tweetId })\n        if (data.status !== 'success') {\n          throw new Error(data.message)\n        }\n        this.$bus.$emit('tweetAction', { type: 'like', tweetId: tweetId, tweetUserId: data.tweet.UserId})\n\n        if (data.tweet.UserId > 0 && data.tweet.UserId !== this.currentUser.id) {\n          this.$socket.emit('personal notification', {\n            senderId: this.currentUser.id,\n            titleData: `${this.currentUser.name} 喜歡你的貼文`,\n            url: `/reply_list/${tweetId}`,\n            type: 'like',\n            recipientId: data.tweet.UserId\n          })\n        }\n        \n      } catch (error) {\n        console.log(error)\n        Toast.fire({\n          icon: 'error',\n          title: '無法按讚推文，請稍後再試'\n        })\n      }\n    },\n    async unlikeTweet (tweetId) {\n      try {\n        const { data } = await likesAPI.unlikeTweet({ tweetId })\n\n        if (data.status !== 'success') {\n          throw new Error(data.message)\n        }\n        this.$bus.$emit('tweetAction', { type: 'unlike', tweetId: tweetId})\n      } catch (error) {\n        console.log(error)\n        Toast.fire({\n          icon: 'error',\n          title: '無法取消按讚，請稍後再試'\n        })\n      }\n    }\n  }\n}\n\n</script>\n\n<style lang=\"scss\">\n$orange: #FF6600;\n$deeporange: #F34A16;\n$lightgray: #f6f8fa;\n$dark: #2c3e50;\n$bitdark: #657786;\n$divider: #E6ECF0;\n.tweet-list {\n  width: 100%;\n  .list-item {\n    padding: 10px 0 10px 0;\n    height: 146px;\n    border-bottom: 1px solid $divider;\n    display: flex;\n    flex-direction: row;\n    position: relative;\n    cursor: pointer;\n    transition: ease-in 0.2s;\n    &:hover {\n      backdrop-filter: brightness(.95);\n    }\n    .avatar {\n      margin: 3px 0 0 15px;\n      height: 50px;\n      min-width: 50px;\n      border-radius: 100px;\n      background: url(https://source.unsplash.com/collection/4389261/100x100) no-repeat center;\n      background-size: 100%;\n      cursor: pointer;\n      &:hover {\n        filter: brightness(.9);\n      }\n    }\n    .tweet-wrapper {\n      margin-left: 10px;\n      .info {\n        height: 22px;\n        line-height: 22px;\n        display: flex;\n        flex-direction: row;\n        font-size: 15px;\n        font-weight: 700;\n        .name {\n          font-weight: 700;\n          margin-right: 5px;\n          cursor: pointer;\n          &:hover {\n            text-decoration: underline;\n          }\n        }\n        .account-and-post-time {\n          color: $bitdark;\n          cursor: pointer;\n            .account {\n            &:hover {\n              text-decoration: underline;\n            }\n          }\n        }\n      }\n      .reply-to-wrapper {\n        margin-top: 4px;\n        text-align: left;\n        height: 22px;\n        line-height: 22px;\n        font-size: 15px;\n        font-weight: 500;\n        cursor: pointer;\n        &:hover {\n          text-decoration: underline;\n        }\n        .title {\n          color: $bitdark;\n        }\n        .name {\n          color: $orange;\n        }\n      }\n      .content {\n        width: 100%;\n        max-width: 510px;\n        height: 66px;\n        overflow: hidden;\n        margin: 5px 15px 0 0;\n        font-size: 15px;\n        font-weight: 500;\n        line-height: 22px;\n        text-align: left;\n      }\n      .action {\n        width: 130px;\n        height: 21px;\n        margin-top: 10px;\n        display: flex;\n        flex-direction: row;\n        justify-content: space-between;\n        color: $bitdark;\n        z-index: 999;\n        .icon  {\n          max-width: 15px;\n          width: 100%;\n          height: 100%;\n          background-color: $bitdark;\n        }\n        .icon.reply {\n          mask: url(../assets/icon_reply.svg) no-repeat center;\n          mask-size: contain;\n        }\n        .icon.like {\n          mask: url(../assets/icon_like.svg) no-repeat center;\n          mask-size: contain;\n        }\n        .icon.like.liked {\n          mask: url(../assets/icon_liked.svg) no-repeat center;\n          mask-size: contain;\n          background-color:#E0245E;\n        }\n        .reply-wrapper {\n          display: flex;\n          align-items: center;\n          width: 40px;\n          margin: 3px 0;\n          height: 15px;\n          cursor: pointer;\n          transition: ease-in 0.2s;\n          &:hover {\n            .icon {\n              background-color: $orange;\n            }\n          }\n        }\n        .like-wrapper {\n          display: flex;\n          align-items: center;\n          width: 40px;\n          margin: 3px 0;\n          height: 15px;\n          cursor: pointer;\n          transition: ease-in 0.2s;\n          &:hover {\n            .icon.like {\n              mask: url(../assets/icon_liked.svg) no-repeat center;\n              mask-size: contain;\n              background-color: $orange;\n            }\n          }\n        }\n        .number {\n          width: 15px;\n          height: 13px;\n          margin-left: 10px;\n          font-weight: 500;\n          font-size: 13px;\n          line-height: 13px;\n        }\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TweetList.vue?vue&type=template&id=0ee98fea&\"\nimport script from \"./TweetList.vue?vue&type=script&lang=js&\"\nexport * from \"./TweetList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TweetList.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { apiHelper } from './../utils/helpers'\nconst getToken = () => localStorage.getItem('token')\n\nexport default {\n  addFollowing ({ userId }) {\n    return apiHelper.post('/followships', { id: userId }, {\n      headers: { Authorization: `Bearer ${getToken()}` }\n    })\n  },\n  deleteFollowing ({ userId }) {\n    return apiHelper.delete(`/followships/${userId}`, {\n      headers: { Authorization: `Bearer ${getToken()}` }\n    })\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"recommend-users\",style:([_vm.more ? { height: ((_vm.topUsers.length * 71 + 92) + \"px\") } : { height:  ((5 * 71 + 92) + \"px\")}])},[_c('div',{staticClass:\"title\"},[_vm._v(\"跟隨誰\")]),_c('div',{staticClass:\"list-group\"},_vm._l((_vm.topUsers),function(user,idx){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!(!_vm.more && idx > 4)),expression:\"!(!more && idx > 4)\"}],key:user.id,staticClass:\"list-group-item\"},[_c('div',{staticClass:\"avatar\",style:({ background: (\"url(\" + (user.avatar) + \") no-repeat center/cover\") }),on:{\"click\":function($event){_vm.$router.push((\"/user/other/\" + (user.id))).catch(function (){})}}}),_c('div',{staticClass:\"info\"},[_c('div',{staticClass:\"name\",on:{\"click\":function($event){_vm.$router.push((\"/user/other/\" + (user.id))).catch(function (){})}}},[_vm._v(_vm._s(user.name))]),_c('div',{staticClass:\"account\",on:{\"click\":function($event){_vm.$router.push((\"/user/other/\" + (user.id))).catch(function (){})}}},[_vm._v(_vm._s(user.account))])]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(user.isFollowed),expression:\"user.isFollowed\"}],staticClass:\"btn btn-follow unfollow\",on:{\"click\":function($event){return _vm.deleteFollowing(user.id)}}},[_vm._v(\"正在跟隨\")]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!user.isFollowed),expression:\"!user.isFollowed\"}],staticClass:\"btn btn-follow\",on:{\"click\":function($event){return _vm.addFollowing(user.id)}}},[_vm._v(\"跟隨\")])])}),0),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.more),expression:\"!more\"}],staticClass:\"footer\",on:{\"click\":function($event){_vm.more = !_vm.more}}},[_vm._v(\"顯示更多\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.more),expression:\"more\"}],staticClass:\"footer\",on:{\"click\":function($event){_vm.more = !_vm.more}}},[_vm._v(\"顯示更少\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"recommend-users\" :style=\"[more ? { height: `${topUsers.length * 71 + 92}px` } : { height:  `${5 * 71 + 92}px`}]\">\n    <div class=\"title\">跟隨誰</div>\n    <div class=\"list-group\">\n      <div v-show=\"!(!more && idx > 4)\" v-for=\"(user, idx) in topUsers\" :key=\"user.id\" class=\"list-group-item\">\n        <div class=\"avatar\" @click=\"$router.push(`/user/other/${user.id}`).catch(()=>{})\" :style=\"{ background: `url(${user.avatar}) no-repeat center/cover` }\"></div>\n        <div class=\"info\">\n          <div class=\"name\" @click=\"$router.push(`/user/other/${user.id}`).catch(()=>{})\">{{ user.name }}</div>\n          <div class=\"account\" @click=\"$router.push(`/user/other/${user.id}`).catch(()=>{})\">{{ user.account }}</div>\n        </div>\n        <button v-show=\"user.isFollowed\" class=\"btn btn-follow unfollow\" @click=\"deleteFollowing(user.id)\">正在跟隨</button>\n        <button v-show=\"!user.isFollowed\" class=\"btn btn-follow\" @click=\"addFollowing(user.id)\">跟隨</button>\n      </div>\n    </div>\n    <div v-show=\"!more\" class=\"footer\" @click=\"more = !more\">顯示更多</div>\n    <div v-show=\"more\" class=\"footer\" @click=\"more = !more\">顯示更少</div>\n  </div>\n</template>\n\n<script>\n\nimport followshipsAPI from '@/apis/followships'\nimport usersAPI from '@/apis/users'\nimport { Toast } from '@/utils/helpers'\nimport { mapState } from 'vuex'\n\nexport default {\n  name: 'RecommendUsers',\n  data () {\n    return {\n      topUsers: [],\n      more: false\n    }\n  },\n  created () {\n    this.fetchTopUsers()\n    this.$bus.$on('followAction', action => {\n      this.followAction(action)\n    })\n  },\n  beforeDestroy () {\n    this.$bus.$off('followAction')\n  },\n  computed: {\n    ...mapState(['currentUser', 'isAuthenticated'])\n  },\n  methods: {\n    async fetchTopUsers () {\n      const loader = this.$loading.show({\n        isFullPage: true,\n        opacity: 1\n      }, { default: this.$createElement('MyLoading') })\n      try {\n        const { data } = await usersAPI.getTopUsers()\n        this.topUsers = data.users.map(user => ({\n          id: user.id,\n          name: user.name,\n          avatar: user.avatar,\n          account: user.account,\n          followerCount: user.FollowerCount,\n          isFollowed: user.isFollowed\n        })).filter(user => user.id !== this.currentUser.id).slice(0, 8)\n        loader.hide()\n      } catch (error) {\n        console.log(error)\n        Toast.fire({\n          icon: 'error',\n          title: '目前無法為你推薦追蹤，請稍候'\n        })\n      }\n    },\n    async addFollowing (userId) {\n      try {\n        const { data } = await followshipsAPI.addFollowing({ userId })\n\n        if (data.status !== 'success') {\n          throw new Error(data.message)\n        }\n        this.$bus.$emit('followAction', { type: 'follow', userId: userId, followship: data.followship})\n\n        if (data.followship.followerId > 0 && data.followship.followingId !== this.currentUser.id) {\n          this.$socket.emit('personal notification', {\n            senderId: this.currentUser.id,\n            titleData: `${this.currentUser.name} 開始追蹤你`,\n            url: `/user/self/follower`,\n            type: 'follow',\n            recipientId: data.followship.followingId\n          })\n        }\n\n        this.topUsers = this.topUsers.map(user => {\n          if (user.id !== userId) {\n            return user\n          } else {\n            return {\n              ...user,\n              followerCount: user.followerCount + 1,\n              isFollowed: true\n            }\n          }\n        })\n      } catch (error) {\n        Toast.fire({\n          icon: 'error',\n          title: '無法加入追蹤，請稍後再試'\n        })\n      }\n    },\n    async deleteFollowing (userId) {\n      try {\n        const { data } = await followshipsAPI.deleteFollowing({ userId })\n\n        if (data.status !== 'success') {\n          throw new Error(data.message)\n        }\n        this.$bus.$emit('followAction', { type: 'unfollow', userId: userId})\n        this.topUsers = this.topUsers.map(user => {\n          if (user.id !== userId) {\n            return user\n          } else {\n            return {\n              ...user,\n              followerCount: user.followerCount - 1,\n              isFollowed: false\n            }\n          }\n        })\n      } catch (error) {\n        Toast.fire({\n          icon: 'error',\n          title: '無法取消追蹤，請稍後再試'\n        })\n      }\n    },\n    followAction (action) {\n\n      this.topUsers = this.topUsers.map(user => {\n        if (user.id !== action.userId) {\n          return user\n        } else {\n          return {\n            ...user,\n            isFollowed: action.type === 'follow' ? true : false \n          }\n        }\n      })\n    }\n  }\n}\n\n</script>\n\n<style lang=\"scss\">\n$orange: #FF6600;\n$deeporange: #F34A16;\n$lightgray: #F5F8FA;\n$bitdark: #657786;\n$divider: #E6ECF0;\n.recommend-users {\n  width: 100%;\n  max-width: 350px;\n  height: 517px;\n  margin: 15px 82px 0 30px;\n  border-radius: 14px;\n  background: $lightgray;\n  .title {\n    margin-top: 10px;\n    text-align: left;\n    padding: 0px 0 0 15px; \n    font-size: 18px;\n    line-height: 26px;\n    height: 36px;\n    font-weight: 700;\n  }\n  .list-group {\n    border: none;\n    .list-group-item {\n      position: relative;\n      border: none;\n      border-radius: 0;\n      border-top: 1px solid $divider;\n      border-bottom: 1px solid $divider;\n      height: 71px;\n      padding: 10px 15px 0 15px;\n      background: none;\n      display: flex;\n      flex-direction: row;\n      align-items: flex-start;\n      cursor: pointer;\n      transition: ease-in 0.2s;\n      &:hover {\n        backdrop-filter: brightness(.95);\n      }\n      .avatar {\n        margin-right: 10px;\n        height: 50px;\n        width: 50px;\n        border-radius: 50%;\n        cursor: pointer;\n        &:hover {\n          filter: brightness(.9);\n        }\n      }\n      .info {\n        margin-top: 8px;\n        display: flex;\n        flex-direction: column;\n        .name {\n          text-align: left;\n          margin-bottom: 3px;\n          font-size: 15px;\n          line-height: 15px;\n          font-weight: 700;\n          cursor: pointer;\n          &:hover {\n            text-decoration: underline;\n          }\n        }\n        .account {\n          text-align: left;\n          font-size: 15px;\n          line-height: 15px;\n          font-weight: 700;\n          color: $bitdark;\n          cursor: pointer;\n          &:hover {\n            text-decoration: underline;\n          }\n        }\n      }\n      .btn-follow {\n        width: 100%;\n        max-width: 62px;\n        position: absolute;\n        top: 20px;\n        right: 15px;\n        height: 30px;\n        line-height: 15px;\n        margin-left: auto;\n        border: 1px solid $orange ;\n        background: none;\n        font-size: 15px;\n        font-weight: 700;\n        color: $orange;\n        border-radius: 100px;\n        transition: ease-in 0.2s;\n        &:hover {\n          box-shadow: 0 0 3px 1px $bitdark;\n          background-color: $orange;\n          color: #ffffff;\n        }\n      }\n      .btn-follow.unfollow {\n        max-width: 92px;\n        background: $orange;\n        color: #ffffff;\n        &:hover {\n          background-color: $deeporange;\n        }\n      }\n    }\n  }\n  .footer {\n    margin-bottom: auto;\n    height: 22px;\n    line-height: 22px;\n    max-width: 60px;\n    margin: 12px 0 12px 15px;\n    text-align: left;\n    font-weight: normal;\n    font-size: 15px;\n    color: $orange;\n    cursor: pointer;\n    transition: ease-in 0.2s;\n    &:hover {\n      text-decoration: underline;\n      color: $deeporange;\n      font-weight: bold;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecommendUsers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecommendUsers.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RecommendUsers.vue?vue&type=template&id=516f4cd0&\"\nimport script from \"./RecommendUsers.vue?vue&type=script&lang=js&\"\nexport * from \"./RecommendUsers.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RecommendUsers.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&lang=scss&\"","import { apiHelper } from './../utils/helpers'\nconst getToken = () => localStorage.getItem('token')\n\nexport default {\n  likeTweet ({ tweetId }) {\n    return apiHelper.post(`/tweets/${tweetId}/like`, null, {\n      headers: { Authorization: `Bearer ${getToken()}` }\n    })\n  },\n  unlikeTweet ({ tweetId }) {\n    return apiHelper.post(`/tweets/${tweetId}/unlike`, null, {\n      headers: { Authorization: `Bearer ${getToken()}` }\n    })\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('Navbar'),_c('div',{staticClass:\"main-container\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"首頁\")]),_c('div',{staticClass:\"post-tweet\"},[_c('form',{staticClass:\"content-wrapper\"},[_c('div',{staticClass:\"avatar\",style:({ background: (\"url(\" + (_vm.currentUser.avatar) + \") no-repeat center/cover\") }),on:{\"click\":function($event){_vm.$router.push('/user/self').catch(function (){})}}}),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tweetDescription),expression:\"tweetDescription\"}],staticClass:\"content\",attrs:{\"placeholder\":\"有什麼新鮮事？\"},domProps:{\"value\":(_vm.tweetDescription)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.tweetDescription=$event.target.value}}}),_c('button',{staticClass:\"btn btn-tweet\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.postTweet(_vm.tweetDescription)}}},[_vm._v(\"推文\")])])]),_c('div',{staticClass:\"divider\"}),_c('TweetList',{attrs:{\"tweets\":_vm.tweets},on:{\"tweetAction\":_vm.tweetAction}})],1),_c('RecommendUsers')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"main\">\n    <Navbar></Navbar>\n    <div class=\"main-container\">\n      <div class=\"title\">首頁</div>\n      <div class=\"post-tweet\">\n        <form class=\"content-wrapper\">\n          <div class=\"avatar\" @click=\"$router.push('/user/self').catch(()=>{})\" :style=\"{ background: `url(${currentUser.avatar}) no-repeat center/cover` }\"></div>\n          <textarea class=\"content\" placeholder=\"有什麼新鮮事？\" v-model=\"tweetDescription\"></textarea>\n          <button class=\"btn btn-tweet\" @click.stop.prevent=\"postTweet(tweetDescription)\">推文</button>\n        </form>\n      </div>\n      <div class=\"divider\"></div>\n      <TweetList :tweets=\"tweets\" @tweetAction=\"tweetAction\"></TweetList>\n    </div>\n    <RecommendUsers></RecommendUsers>\n  </div>\n</template>\n\n<script>\nimport Navbar from '@/components/Navbar.vue'\nimport RecommendUsers from '@/components/RecommendUsers.vue'\nimport TweetList from '@/components/TweetList.vue'\nimport TweetsAPI from '@/apis/tweets'\nimport { Toast } from '@/utils/helpers'\nimport { mapState } from 'vuex'\nimport _ from 'loadsh'\nexport default {\n  name: 'Main',\n  components: {\n    Navbar,\n    RecommendUsers,\n    TweetList\n  },\n  computed: {\n    ...mapState(['currentUser', 'isAuthenticated']),\n  },\n  data () {\n    return {\n      tweets: [],\n      tweetDescription: ''\n    }\n  },\n  watch: {\n    tweetDescription () {\n      this.checkTextLength()\n    }\n  },\n  created () {\n    this.$bus.$on('tweetAction', action => {\n      this.tweetAction(action)\n    })\n    this.$bus.$on('renewTweets', action => {\n      if (this.$route.path === '/main') { \n        this.fetchTweets(action)\n      }\n    })\n    this.fetchTweets()\n  },\n  beforeDestroy () {\n    this.$bus.$off('tweetAction')\n    this.$bus.$off('renewTweets')\n  },\n  methods: {\n    checkTextLength: _.debounce(function() {\n      if (this.tweetDescription.length > 139) {\n        this.tweetDescription = this.tweetDescription.slice(0, 139)\n        Toast.fire({\n          icon: 'error',\n          title: '推文字數已達上限'\n        })\n      }\n    }, 1000),\n    async fetchTweets () {\n      const loader = this.$loading.show({\n        isFullPage: true,\n        opacity: 1\n      }, { default: this.$createElement('MyLoading') })\n      try {\n        const { data } = await TweetsAPI.getTweets()\n        this.tweets = data.map(tweet => ({\n          id: tweet.id,\n          userId: tweet.User.id,\n          name: tweet.User.name,\n          avatar: tweet.User.avatar,\n          account: tweet.User.account,\n          createdAt: tweet.createdAt,\n          description: tweet.description,\n          likeTweetCount: tweet.likeTweetCount,\n          replyTweetCount: tweet.replyTweetCount,\n          isLiked: tweet.isLiked\n        }))\n        this.tweets.sort((a, b) => {\n          return a.createdAt < b.createdAt ? 1 : -1;\n        })\n        loader.hide()\n      } catch (error) {\n        loader.hide()\n        console.log(error)\n        Toast.fire({\n          icon: 'error',\n          title: '目前無法取得推文，請稍候'\n        })\n      }\n    },\n    tweetAction (action) {\n      this.tweets = this.tweets.map(tweet => {\n        if (tweet.id !== action.tweetId) {\n          return tweet\n        } else {\n          return {\n            ...tweet,\n            likeTweetCount: action.type === 'like' ? tweet.likeTweetCount + 1 : tweet.likeTweetCount - 1,\n            isLiked: !tweet.isLiked\n          }\n        }\n      })\n    },\n    async postTweet (description) {\n      try {\n        if (!description) {\n          Toast.fire({\n            icon: 'error',\n            title: '請輸入內容'\n          })\n          return\n        }\n\n        if (description.length > 140) {\n          Toast.fire({\n            icon: 'error',\n            title: '推文字數需在140內'\n          })\n          return\n        }\n\n        const { data } = await TweetsAPI.postTweet({ description })\n\n        if (data.status !== 'success') {\n          throw new Error(data.message)\n        }\n\n        this.$socket.emit('tweet notification', {\n          senderId: this.currentUser.id,\n          titleData: `${this.currentUser.name} 有新的推文`,\n          contentData: description,\n          url: `/reply_list/${data.tweetId}`,\n          type: 'tweet'\n        })\n\n        await this.fetchTweets()\n        this.tweets.sort((a, b) => {\n          return a.createdAt < b.createdAt ? 1 : -1;\n        })\n        this.tweetDescription = ''\n        this.showNewTweetModal = false\n      } catch (error) {\n        console.log(error)\n        Toast.fire({\n          icon: 'error',\n          title: '目前無法推文，請稍候'\n        })\n      }\n    }\n  }\n}\n\n</script>\n\n<style lang=\"scss\">\n$orange: #FF6600;\n$deeporange: #F34A16;\n$lightdark: #9197A3;\n$divider: #E6ECF0;\n.main {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  .main-container {\n    max-height: 100vh;\n    overflow-y: scroll;\n    border-left: 1px solid $divider;\n    border-right: 1px solid $divider;\n    max-width: 600px;\n    padding: 0;\n    .title {\n      border-bottom: 1px solid $divider;\n      height: 55px;\n      padding: 15px 0 15px 15px;\n      line-height: 26px;\n      font-size: 18px;\n      font-weight: 700;\n      text-align: left;\n    }\n    .post-tweet {\n      display:flex;\n      flex-direction: row;\n      height: 120px;\n      position: relative;\n      .content-wrapper {\n        width: 100%;\n        height: 100%;\n        .avatar {\n          position: absolute;\n          top: 10px;\n          left: 15px;\n          height: 50px;\n          width: 50px;\n          border-radius: 50%;\n          cursor: pointer;\n          &:hover {\n            filter: brightness(.95);\n          }\n        }\n        ::placeholder {\n          position: absolute;\n          top: 20px;\n          left: 75px;\n          font-weight: 500;\n          font-size: 18px;\n          line-height: 26px;\n          color: $lightdark;\n        }\n        .content {\n          padding: 20px 0 0 75px;\n          height: 100%;\n          border: none;\n          overflow: auto;\n          outline: none;\n          box-shadow: none;\n          resize: none;\n          width: 100%;\n          font-size: 18px;\n          font-weight: 500;\n          font-size: 18px;\n          line-height: 26px;\n        }\n        .btn-tweet {\n          width: 100%;\n          max-width: 64px;\n          height: 40px;\n          position: absolute;\n          bottom: 10px;\n          right: 15px;\n          background: $orange;\n          font-size: 18px;\n          font-weight: 700;\n          color: #ffffff;\n          border-radius: 100px;\n          transition: ease-in 0.2s;\n          &:hover {\n            background-color: $deeporange;\n            box-shadow: 0 0 3px 1px $lightdark;\n          }\n        }\n      }\n    }\n    .divider {\n      min-height: 10px;\n      max-height: 10px;\n      background-color: $divider;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Main.vue?vue&type=template&id=10edc50d&\"\nimport script from \"./Main.vue?vue&type=script&lang=js&\"\nexport * from \"./Main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Main.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}