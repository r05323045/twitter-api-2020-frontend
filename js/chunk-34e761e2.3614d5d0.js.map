{"version":3,"sources":["webpack:///./src/views/OtherFollowers.vue?4f96","webpack:///src/views/OtherFollowers.vue","webpack:///./src/views/OtherFollowers.vue?ea4c","webpack:///./src/views/OtherFollowers.vue?c7af","webpack:///./src/views/OtherFollowers.vue?0066"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","$route","path","indexOf","expression","attrs","followers","user","followings","staticRenderFns","components","Navbar","SelfUserFollowers","RecommendUsers","data","computed","created","$bus","$on","fetchFollowers","params","id","fetchProfile","watch","methods","followAction","component"],"mappings":"8IAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,4BAA4B,CAACF,EAAG,SAAS,CAACE,YAAY,UAAUF,EAAG,oBAAoB,CAACG,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOV,EAAIW,OAAOC,KAAKC,QAAQ,YAAc,EAAGC,WAAW,wCAAwCC,MAAM,CAAC,iBAAmBf,EAAIgB,UAAU,QAAUhB,EAAIiB,QAAQb,EAAG,oBAAoB,CAACG,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOV,EAAIW,OAAOC,KAAKC,QAAQ,aAAe,EAAGC,WAAW,yCAAyCC,MAAM,CAAC,iBAAmBf,EAAIkB,WAAW,QAAUlB,EAAIiB,QAAQb,EAAG,iBAAiB,CAACE,YAAY,WAAW,IACvqBa,EAAkB,G,8JCgBtB,GACEC,WAAY,CACVC,OAAJ,OACIC,kBAAJ,OACIC,eAAJ,QAEEC,KANF,WAOI,MAAO,CACLR,UAAW,GACXE,WAAY,GACZD,KAAM,KAGVQ,SAAU,OAAZ,OAAY,CAAZ,GACA,mDAEEC,QAhBF,WAgBA,WACIzB,KAAK0B,KAAKC,IAAI,gBAAgB,SAAlC,GACU,EAAV,eACQ,EAAR,mBAGI3B,KAAK4B,eAAe5B,KAAKU,OAAOmB,OAAOC,IACvC9B,KAAK+B,gBAEPC,MAAO,CACL,cAAe,WACbhC,KAAK4B,eAAe5B,KAAKU,OAAOmB,OAAOC,MAG3CG,QAAS,CACP,aADJ,WACA,2KACA,mBACA,cACA,WACA,yCACA,qBALA,kBAOA,8BAPA,gBAOA,EAPA,EAOA,KACA,SACA,oDACA,QACA,iBACA,iBACA,qBACA,uBACA,sBACA,0BACA,gCACA,kCACA,sBAEA,SArBA,qDAuBA,SACA,kBACA,aACA,aACA,uBA3BA,6DA+BI,cAhCJ,WAgCA,yKACA,mBACA,cACA,WACA,yCAJA,kBAMA,qBANA,gBAMA,EANA,EAMA,KACA,2CACA,QACA,YACA,gBACA,kBACA,8BACA,4BACA,sDACA,SAfA,qDAiBA,kBACA,aACA,aACA,yBApBA,6DAwBI,eAxDJ,SAwDA,4LAEA,gCAFA,cAEA,EAFA,OAGA,8EAHA,SAIA,iCAJA,OAIA,EAJA,OAKA,+EALA,qDAOA,aACA,aACA,uBATA,6DAcIC,aAtEJ,WAuEMlC,KAAK4B,eAAe5B,KAAKU,OAAOmB,OAAOC,IACvC9B,KAAK+B,kBCvH6U,I,wBCQpVI,EAAY,eACd,EACArC,EACAoB,GACA,EACA,KACA,KACA,MAIa,aAAAiB,E,2CCnBf","file":"js/chunk-34e761e2.3614d5d0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row other-page-container\"},[_c('Navbar',{staticClass:\"col-3\"}),_c('SelfUserFollowers',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$route.path.indexOf('follower') > 0),expression:\"$route.path.indexOf('follower') > 0\"}],attrs:{\"initialFollowers\":_vm.followers,\"nowUser\":_vm.user}}),_c('SelfUserFollowers',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$route.path.indexOf('following') > 0),expression:\"$route.path.indexOf('following') > 0\"}],attrs:{\"initialFollowers\":_vm.followings,\"nowUser\":_vm.user}}),_c('RecommendUsers',{staticClass:\"col-4\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"row other-page-container\">\n    <Navbar class=\"col-3\" />\n    <SelfUserFollowers v-show=\"$route.path.indexOf('follower') > 0\" :initialFollowers=\"followers\" :nowUser=\"user\" />\n    <SelfUserFollowers v-show=\"$route.path.indexOf('following') > 0\" :initialFollowers=\"followings\" :nowUser=\"user\" />\n    <RecommendUsers class=\"col-4\" />\n  </div>\n     \n</template>\n\n<script>\nimport SelfUserFollowers from \"./../components/SelfUserFollowers\" \nimport Navbar from \"./../components/Navbar\"\nimport RecommendUsers from \"./../components/RecommendUsers\"\nimport UsersAPI from './../apis/users'\nimport { Toast } from '@/utils/helpers'\nimport { mapState } from 'vuex'\nexport default {\n  components: {\n    Navbar,\n    SelfUserFollowers,\n    RecommendUsers\n  },\n  data() {\n    return {\n      followers: [],\n      followings: [],\n      user: {}\n    }\n  },\n  computed: {\n    ...mapState(['currentUser', 'isAuthenticated'])\n  },\n  created() {\n    this.$bus.$on('followAction', action => {\n      if (this.$route.params) {\n        this.followAction(action)\n      } \n    })\n    this.fetchFollowers(this.$route.params.id)\n    this.fetchProfile()\n  },\n  watch: {\n    '$route.path': function () {\n      this.fetchFollowers(this.$route.params.id)\n    }\n  },\n  methods: {\n    async fetchProfile () {\n      const loader = this.$loading.show({\n        isFullPage: true,\n        opacity: 1\n      }, { default: this.$createElement('MyLoading') })\n      const userId = this.$route.params.id\n      try {\n        const { data } = await UsersAPI.getProfile({userId})\n        this.user = data\n        this.user.tweets = this.user.tweets.map(tweet => ({\n          id: tweet.id,\n          userId: tweet.User.id,\n          name: tweet.User.name,\n          avatar: tweet.User.avatar,\n          account: tweet.User.account,\n          createdAt: tweet.createdAt,\n          description: tweet.description,\n          likeTweetCount: tweet.likeTweetCount,\n          replyTweetCount: tweet.replyTweetCount,\n          isLiked: tweet.isLiked\n        }))\n        loader.hide()\n      } catch (error) {\n        loader.hide()\n        console.log(error)\n        Toast.fire({\n          icon: 'error',\n          title: '目前無法取得資料，請稍候'\n        })\n      }\n    },\n    async fetchTopUsers () {\n      const loader = this.$loading.show({\n        isFullPage: true,\n        opacity: 1\n      }, { default: this.$createElement('MyLoading') })\n      try {\n        const { data } = await UsersAPI.getTopUsers()\n        this.topUsers = data.users.map(user => ({\n          id: user.id,\n          name: user.name,\n          avatar: user.avatar,\n          account: user.account,\n          followerCount: user.FollowerCount,\n          isFollowed: user.isFollowed\n        })).filter(user => user.id !== this.currentUser.id)\n        loader.hide()\n      } catch (error) {\n        console.log(error)\n        Toast.fire({\n          icon: 'error',\n          title: '目前無法為你推薦追蹤，請稍候'\n        })\n      }\n    },\n    async fetchFollowers(userId) {\n      try {\n        const followerData = await UsersAPI.getFollowers({ userId })\n        this.followers = followerData.data.sort((a, b) => {return a.createdAt < b.createdAt ? 1 : -1})\n        const followingData = await UsersAPI.getFollowings({ userId })\n        this.followings = followingData.data.sort((a, b) => {return a.createdAt < b.createdAt ? 1 : -1})\n      } catch {\n        Toast.fire({\n          icon: 'error',\n          title: '無法取得資料，請稍後再試'\n        }) \n      }\n\n    },\n    followAction () {\n      this.fetchFollowers(this.$route.params.id)\n      this.fetchProfile()\n    }\n  }\n}\n</script>\n\n<style>\n  .other-page-container {\n    /* outline: red solid;   */\n    min-width: 1440px;\n    height: 100%;\n  }\n  /* .content {\n    flex: 1;\n  } */\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OtherFollowers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OtherFollowers.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OtherFollowers.vue?vue&type=template&id=cb20689c&\"\nimport script from \"./OtherFollowers.vue?vue&type=script&lang=js&\"\nexport * from \"./OtherFollowers.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OtherFollowers.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OtherFollowers.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}